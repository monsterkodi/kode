// koffee 1.20.0

/*
 0000000   00     00   0000000   00000000   000   000  
000   000  000   000  000   000  000   000  000  000   
000 00 00  000000000  000000000  0000000    0000000    
000 0000   000 0 000  000   000  000   000  000  000   
 00000 00  000   000  000   000  000   000  000   000
 */
var cmp, evl, ref;

ref = require('./utils'), cmp = ref.cmp, evl = ref.evl;

describe('qmark', function() {
    it('nullcmp', function() {
        cmp("a?", ";(a != null)");
        cmp("a.b.c?", ";(a.b.c != null)");
        cmp("a.b().c?", ";(a.b().c != null)");
        cmp("if a.b().c?", "if ((a.b().c != null))\n{\n}");
        cmp("@m?", ";(this.m != null)");
        cmp("-> m?", "(function ()\n{\n    return (m != null)\n})");
        cmp("r.filter (m) -> m?", "r.filter(function (m)\n{\n    return (m != null)\n})");
        return cmp("matches = matches.filter (m) -> m[1]?", "matches = matches.filter(function (m)\n{\n    return (m[1] != null)\n})");
    });
    it('?=', function() {
        cmp("t.a ?= {}", "t.a = ((_1_4_=t.a) != null ? _1_4_ : {})");
        return cmp("x = t.b ?= {}", "x = t.b = ((_1_8_=t.b) != null ? _1_8_ : {})");
    });
    it('assert', function() {
        cmp("e?.d", ";(e != null ? e.d : undefined)");
        cmp("e?()", ';(typeof e === "function" ? e() : undefined)');
        cmp("e?[1]", ";(e != null ? e[1] : undefined)");
        cmp("e?[1].f", ";(e != null ? e[1].f : undefined)");
        cmp("e?[1]?.g", ";(e != null ? e[1] != null ? e[1].g : undefined : undefined)");
        cmp("e?.f?.d", ";(e != null ? (_1_4_=e.f) != null ? _1_4_.d : undefined : undefined)");
        cmp("@m?.n", ";(this.m != null ? this.m.n : undefined)");
        cmp("@m? a", ';(typeof this.m === "function" ? this.m(a) : undefined)');
        cmp("@m?.f a", ";(this.m != null ? this.m.f(a) : undefined)");
        cmp("->\n    s?.c\n    r?.d", "(function ()\n{\n    (s != null ? s.c : undefined)\n    return (r != null ? r.d : undefined)\n})");
        return evl("e=1;e?[1]?.g", void 0);
    });
    it('combined', function() {
        cmp("e?.col?", ";((e != null ? e.col : undefined) != null)");
        cmp("(a.b?.c.d?.e == 2)", ";(((_1_4_=a.b) != null ? (_1_9_=_1_4_.c.d) != null ? _1_9_.e : undefined : undefined) === 2)");
        cmp("x = a[1]?.b()?.c?().d?.e", "x = (a[1] != null ? (_1_13_=a[1].b()) != null ? typeof (_1_16_=_1_13_.c) === \"function\" ? (_1_21_=_1_16_().d) != null ? _1_21_.e : undefined : undefined : undefined : undefined)");
        return cmp("x = a.b?[222]?(333)?.e", "x = ((_1_7_=a.b) != null ? typeof _1_7_[222] === \"function\" ? (_1_19_=_1_7_[222](333)) != null ? _1_19_.e : undefined : undefined : undefined)");
    });
    return it('functions', function() {
        cmp("f c ? '', 4", "f((c != null ? c : ''),4)");
        return cmp("a = ->\n    if b?.e?.l\n        hua\n    oga", "\na = function ()\n{\n    var _2_11_\n\n    if ((b != null ? (_2_11_=b.e) != null ? _2_11_.l : undefined : undefined))\n    {\n        hua\n    }\n    return oga\n}");
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicW1hcmsuanMiLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXMiOlsicW1hcmsuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7QUFBQSxJQUFBOztBQVFBLE1BQWUsT0FBQSxDQUFRLFNBQVIsQ0FBZixFQUFFLGFBQUYsRUFBTzs7QUFFUCxRQUFBLENBQVMsT0FBVCxFQUFpQixTQUFBO0lBUWIsRUFBQSxDQUFHLFNBQUgsRUFBYSxTQUFBO1FBRVQsR0FBQSxDQUFJLElBQUosRUFBNEIsY0FBNUI7UUFDQSxHQUFBLENBQUksUUFBSixFQUE0QixrQkFBNUI7UUFDQSxHQUFBLENBQUksVUFBSixFQUE0QixvQkFBNUI7UUFDQSxHQUFBLENBQUksYUFBSixFQUE0Qiw4QkFBNUI7UUFDQSxHQUFBLENBQUksS0FBSixFQUE0QixtQkFBNUI7UUFFQSxHQUFBLENBQUksT0FBSixFQUNJLDZDQURKO1FBT0EsR0FBQSxDQUFJLG9CQUFKLEVBQ0ksc0RBREo7ZUFRQSxHQUFBLENBQUksdUNBQUosRUFDSSx5RUFESjtJQXZCUyxDQUFiO0lBK0JBLEVBQUEsQ0FBRyxJQUFILEVBQVEsU0FBQTtRQUVKLEdBQUEsQ0FBSSxXQUFKLEVBQ0ksMENBREo7ZUFLQSxHQUFBLENBQUksZUFBSixFQUNJLDhDQURKO0lBUEksQ0FBUjtJQWtCQSxFQUFBLENBQUcsUUFBSCxFQUFZLFNBQUE7UUFFUixHQUFBLENBQUksTUFBSixFQUE0QixnQ0FBNUI7UUFDQSxHQUFBLENBQUksTUFBSixFQUE0Qiw4Q0FBNUI7UUFDQSxHQUFBLENBQUksT0FBSixFQUE0QixpQ0FBNUI7UUFDQSxHQUFBLENBQUksU0FBSixFQUE0QixtQ0FBNUI7UUFDQSxHQUFBLENBQUksVUFBSixFQUE0Qiw4REFBNUI7UUFDQSxHQUFBLENBQUksU0FBSixFQUE0QixzRUFBNUI7UUFFQSxHQUFBLENBQUksT0FBSixFQUE0QiwwQ0FBNUI7UUFDQSxHQUFBLENBQUksT0FBSixFQUE0Qix5REFBNUI7UUFDQSxHQUFBLENBQUksU0FBSixFQUE0Qiw2Q0FBNUI7UUFFQSxHQUFBLENBQUksd0JBQUosRUFJUSxrR0FKUjtlQVlBLEdBQUEsQ0FBSSxjQUFKLEVBQTRCLE1BQTVCO0lBekJRLENBQVo7SUFpQ0EsRUFBQSxDQUFHLFVBQUgsRUFBYyxTQUFBO1FBRVYsR0FBQSxDQUFJLFNBQUosRUFBNEIsNENBQTVCO1FBRUEsR0FBQSxDQUFJLG9CQUFKLEVBRVEsOEZBRlI7UUFNQSxHQUFBLENBQUksMEJBQUosRUFFUSxxTEFGUjtlQU1BLEdBQUEsQ0FBSSx3QkFBSixFQUVRLGtKQUZSO0lBaEJVLENBQWQ7V0FzQkEsRUFBQSxDQUFHLFdBQUgsRUFBZSxTQUFBO1FBRVgsR0FBQSxDQUFJLGFBQUosRUFBb0IsMkJBQXBCO2VBRUEsR0FBQSxDQUFJLDhDQUFKLEVBS1Esc0tBTFI7SUFKVyxDQUFmO0FBaEhhLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4gMDAwMDAwMCAgIDAwICAgICAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMCAgIDAwMCAgXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwICAgXG4wMDAgMDAgMDAgIDAwMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwICAgIDAwMDAwMDAgICAgXG4wMDAgMDAwMCAgIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwICAgXG4gMDAwMDAgMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4jIyNcblxueyBjbXAsIGV2bCB9ID0gcmVxdWlyZSAnLi91dGlscydcblxuZGVzY3JpYmUgJ3FtYXJrJyAtPlxuXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgICAgIDAwMDAwMDAgIDAwICAgICAwMCAgMDAwMDAwMDAgICBcbiAgICAjIDAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAwMDAgICAgICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuICAgICMgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgICAgIDAwMCAgICAgICAwMDAwMDAwMDAgIDAwMDAwMDAwICAgXG4gICAgIyAwMDAgIDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgICAgMDAwICAgICAgIDAwMCAwIDAwMCAgMDAwICAgICAgICBcbiAgICAjIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwICAwMDAwMDAwICAgMDAwMDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgIFxuXG4gICAgaXQgJ251bGxjbXAnIC0+XG4gICAgICAgICAgICBcbiAgICAgICAgY21wIFwiYT9cIiAgICAgICAgICAgICAgICAgICAgXCI7KGEgIT0gbnVsbClcIlxuICAgICAgICBjbXAgXCJhLmIuYz9cIiAgICAgICAgICAgICAgICBcIjsoYS5iLmMgIT0gbnVsbClcIlxuICAgICAgICBjbXAgXCJhLmIoKS5jP1wiICAgICAgICAgICAgICBcIjsoYS5iKCkuYyAhPSBudWxsKVwiXG4gICAgICAgIGNtcCBcImlmIGEuYigpLmM/XCIgICAgICAgICAgIFwiaWYgKChhLmIoKS5jICE9IG51bGwpKVxcbntcXG59XCJcbiAgICAgICAgY21wIFwiQG0/XCIgICAgICAgICAgICAgICAgICAgXCI7KHRoaXMubSAhPSBudWxsKVwiXG4gICAgICAgIFxuICAgICAgICBjbXAgXCItPiBtP1wiLFxuICAgICAgICAgICAgXCJcIlwiXG4gICAgICAgICAgICAoZnVuY3Rpb24gKClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKG0gIT0gbnVsbClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcIlwiXCJcbiAgICAgICAgY21wIFwici5maWx0ZXIgKG0pIC0+IG0/XCIsXG4gICAgICAgICAgICBcIlwiXCJcbiAgICAgICAgICAgIHIuZmlsdGVyKGZ1bmN0aW9uIChtKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiAobSAhPSBudWxsKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgXG4gICAgICAgIGNtcCBcIm1hdGNoZXMgPSBtYXRjaGVzLmZpbHRlciAobSkgLT4gbVsxXT9cIixcbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgbWF0Y2hlcyA9IG1hdGNoZXMuZmlsdGVyKGZ1bmN0aW9uIChtKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiAobVsxXSAhPSBudWxsKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgXG4gICAgaXQgJz89JyAtPlxuICAgICAgICBcbiAgICAgICAgY21wIFwidC5hID89IHt9XCIsXG4gICAgICAgICAgICBcIlwiXCJcbiAgICAgICAgICAgIHQuYSA9ICgoXzFfNF89dC5hKSAhPSBudWxsID8gXzFfNF8gOiB7fSlcbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICBcbiAgICAgICAgY21wIFwieCA9IHQuYiA/PSB7fVwiLFxuICAgICAgICAgICAgXCJcIlwiXG4gICAgICAgICAgICB4ID0gdC5iID0gKChfMV84Xz10LmIpICE9IG51bGwgPyBfMV84XyA6IHt9KVxuICAgICAgICAgICAgXCJcIlwiXG4gICAgICAgICAgICBcbiAgICAjICAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwICAwMDAwMDAwMCAgMDAwMDAwMDAgICAwMDAwMDAwMDAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG4gICAgIyAwMDAwMDAwMDAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgICAgICAgMDAwICAgICBcbiAgICAjIDAwMCAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAgICAwMDAgICAgIFxuICAgICMgMDAwICAgMDAwICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG4gICAgXG4gICAgaXQgJ2Fzc2VydCcgLT5cbiAgICAgICAgXG4gICAgICAgIGNtcCBcImU/LmRcIiAgICAgICAgICAgICAgICAgIFwiOyhlICE9IG51bGwgPyBlLmQgOiB1bmRlZmluZWQpXCJcbiAgICAgICAgY21wIFwiZT8oKVwiICAgICAgICAgICAgICAgICAgJzsodHlwZW9mIGUgPT09IFwiZnVuY3Rpb25cIiA/IGUoKSA6IHVuZGVmaW5lZCknXG4gICAgICAgIGNtcCBcImU/WzFdXCIgICAgICAgICAgICAgICAgIFwiOyhlICE9IG51bGwgPyBlWzFdIDogdW5kZWZpbmVkKVwiXG4gICAgICAgIGNtcCBcImU/WzFdLmZcIiAgICAgICAgICAgICAgIFwiOyhlICE9IG51bGwgPyBlWzFdLmYgOiB1bmRlZmluZWQpXCJcbiAgICAgICAgY21wIFwiZT9bMV0/LmdcIiAgICAgICAgICAgICAgXCI7KGUgIT0gbnVsbCA/IGVbMV0gIT0gbnVsbCA/IGVbMV0uZyA6IHVuZGVmaW5lZCA6IHVuZGVmaW5lZClcIlxuICAgICAgICBjbXAgXCJlPy5mPy5kXCIgICAgICAgICAgICAgICBcIjsoZSAhPSBudWxsID8gKF8xXzRfPWUuZikgIT0gbnVsbCA/IF8xXzRfLmQgOiB1bmRlZmluZWQgOiB1bmRlZmluZWQpXCJcbiAgICAgICAgXG4gICAgICAgIGNtcCBcIkBtPy5uXCIgICAgICAgICAgICAgICAgIFwiOyh0aGlzLm0gIT0gbnVsbCA/IHRoaXMubS5uIDogdW5kZWZpbmVkKVwiXG4gICAgICAgIGNtcCBcIkBtPyBhXCIgICAgICAgICAgICAgICAgICc7KHR5cGVvZiB0aGlzLm0gPT09IFwiZnVuY3Rpb25cIiA/IHRoaXMubShhKSA6IHVuZGVmaW5lZCknXG4gICAgICAgIGNtcCBcIkBtPy5mIGFcIiAgICAgICAgICAgICAgIFwiOyh0aGlzLm0gIT0gbnVsbCA/IHRoaXMubS5mKGEpIDogdW5kZWZpbmVkKVwiXG4gICAgICAgIFxuICAgICAgICBjbXAgXCJcIlwiXG4gICAgICAgICAgICAtPlxuICAgICAgICAgICAgICAgIHM/LmNcbiAgICAgICAgICAgICAgICByPy5kXG4gICAgICAgICAgICBcIlwiXCIgXCJcIlwiXG4gICAgICAgICAgICAoZnVuY3Rpb24gKClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAocyAhPSBudWxsID8gcy5jIDogdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybiAociAhPSBudWxsID8gci5kIDogdW5kZWZpbmVkKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICBcbiAgICAgICAgZXZsIFwiZT0xO2U/WzFdPy5nXCIgICAgICAgICAgdW5kZWZpbmVkXG4gICAgICAgIFxuICAgICMgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAgICAgIDAwICAwMDAwMDAwICAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwMDAwMCAgICBcbiAgICAjIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAwMDAwMDAgIDAwMDAwMDAgICAgMDAwICAwMDAgMCAwMDAgIDAwMDAwMDAgICAwMDAgICAwMDAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwICAwMDAwICAwMDAgICAgICAgMDAwICAgMDAwICBcbiAgICAjICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAgICAgXG4gICAgXG4gICAgaXQgJ2NvbWJpbmVkJyAtPlxuICAgICAgICBcbiAgICAgICAgY21wIFwiZT8uY29sP1wiICAgICAgICAgICAgICAgXCI7KChlICE9IG51bGwgPyBlLmNvbCA6IHVuZGVmaW5lZCkgIT0gbnVsbClcIlxuICAgICAgICBcbiAgICAgICAgY21wIFwiXCJcIlxuICAgICAgICAgICAgKGEuYj8uYy5kPy5lID09IDIpXG4gICAgICAgICAgICBcIlwiXCIgXCJcIlwiXG4gICAgICAgICAgICA7KCgoXzFfNF89YS5iKSAhPSBudWxsID8gKF8xXzlfPV8xXzRfLmMuZCkgIT0gbnVsbCA/IF8xXzlfLmUgOiB1bmRlZmluZWQgOiB1bmRlZmluZWQpID09PSAyKVxuICAgICAgICAgICAgXCJcIlwiIFxuXG4gICAgICAgIGNtcCBcIlwiXCJcbiAgICAgICAgICAgIHggPSBhWzFdPy5iKCk/LmM/KCkuZD8uZVxuICAgICAgICAgICAgXCJcIlwiIFwiXCJcIlxuICAgICAgICAgICAgeCA9IChhWzFdICE9IG51bGwgPyAoXzFfMTNfPWFbMV0uYigpKSAhPSBudWxsID8gdHlwZW9mIChfMV8xNl89XzFfMTNfLmMpID09PSBcImZ1bmN0aW9uXCIgPyAoXzFfMjFfPV8xXzE2XygpLmQpICE9IG51bGwgPyBfMV8yMV8uZSA6IHVuZGVmaW5lZCA6IHVuZGVmaW5lZCA6IHVuZGVmaW5lZCA6IHVuZGVmaW5lZClcbiAgICAgICAgICAgIFwiXCJcIiBcblxuICAgICAgICBjbXAgXCJcIlwiXG4gICAgICAgICAgICB4ID0gYS5iP1syMjJdPygzMzMpPy5lXG4gICAgICAgICAgICBcIlwiXCIgXCJcIlwiXG4gICAgICAgICAgICB4ID0gKChfMV83Xz1hLmIpICE9IG51bGwgPyB0eXBlb2YgXzFfN19bMjIyXSA9PT0gXCJmdW5jdGlvblwiID8gKF8xXzE5Xz1fMV83X1syMjJdKDMzMykpICE9IG51bGwgPyBfMV8xOV8uZSA6IHVuZGVmaW5lZCA6IHVuZGVmaW5lZCA6IHVuZGVmaW5lZClcbiAgICAgICAgICAgIFwiXCJcIiBcbiAgICAgICAgICAgIFxuICAgIGl0ICdmdW5jdGlvbnMnIC0+XG4gICAgICAgIFxuICAgICAgICBjbXAgXCJmIGMgPyAnJywgNFwiICAgXCJmKChjICE9IG51bGwgPyBjIDogJycpLDQpXCJcbiAgICAgICAgXG4gICAgICAgIGNtcCBcIlwiXCJcbiAgICAgICAgICAgIGEgPSAtPlxuICAgICAgICAgICAgICAgIGlmIGI/LmU/LmxcbiAgICAgICAgICAgICAgICAgICAgaHVhXG4gICAgICAgICAgICAgICAgb2dhXG4gICAgICAgICAgICBcIlwiXCIgXCJcIlwiXG5cbiAgICAgICAgICAgIGEgPSBmdW5jdGlvbiAoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciBfMl8xMV9cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICgoYiAhPSBudWxsID8gKF8yXzExXz1iLmUpICE9IG51bGwgPyBfMl8xMV8ubCA6IHVuZGVmaW5lZCA6IHVuZGVmaW5lZCkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBodWFcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9nYVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXCJcIlwiXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICJdfQ==
//# sourceURL=qmark.coffee