// koffee 1.20.0

/*
 0000000   00     00   0000000   00000000   000   000  
000   000  000   000  000   000  000   000  000  000   
000 00 00  000000000  000000000  0000000    0000000    
000 0000   000 0 000  000   000  000   000  000  000   
 00000 00  000   000  000   000  000   000  000   000
 */
var cmp, evl, ref;

ref = require('./utils'), cmp = ref.cmp, evl = ref.evl;

describe('qmark', function() {
    it('nullcmp', function() {
        cmp("a?", ";(a != null)");
        cmp("a.b.c?", ";(a.b.c != null)");
        cmp("a.b().c?", ";(a.b().c != null)");
        cmp("if a.b().c?", "if ((a.b().c != null))\n{\n}");
        cmp("@m?", ";(this.m != null)");
        cmp("-> m?", "(function ()\n{\n    return (m != null)\n})");
        cmp("r.filter (m) -> m?", "r.filter(function (m)\n{\n    return (m != null)\n})");
        return cmp("matches = matches.filter (m) -> m[1]?", "matches = matches.filter(function (m)\n{\n    return (m[1] != null)\n})");
    });
    it('?=', function() {
        cmp("t.a ?= {}", "t.a = ((_1_4_=t.a) != null ? _1_4_ : {})");
        return cmp("x = t.b ?= {}", "x = t.b = ((_1_8_=t.b) != null ? _1_8_ : {})");
    });
    it('assert', function() {
        cmp("e?.d", ";(e != null ? e.d : undefined)");
        cmp("e?()", ';(typeof e === "function" ? e() : undefined)');
        cmp("e?[1]", ";(e != null ? e[1] : undefined)");
        cmp("e?[1].f", ";(e != null ? e[1].f : undefined)");
        cmp("e?[1]?.g", ";(e != null ? e[1] != null ? e[1].g : undefined : undefined)");
        cmp("e?.f?.d", ";(e != null ? (_1_4_=e.f) != null ? _1_4_.d : undefined : undefined)");
        cmp("@m?.n", ";(this.m != null ? this.m.n : undefined)");
        cmp("@m? a", ';(typeof this.m === "function" ? this.m(a) : undefined)');
        cmp("@m?.f a", ";(this.m != null ? this.m.f(a) : undefined)");
        cmp("->\n    s?.c\n    r?.d", "(function ()\n{\n    (s != null ? s.c : undefined)\n    return (r != null ? r.d : undefined)\n})");
        return evl("e=1;e?[1]?.g", void 0);
    });
    it('combined', function() {
        cmp("e?.col?", ";((e != null ? e.col : undefined) != null)");
        cmp("(a.b?.c.d?.e == 2)", ";(((_1_4_=a.b) != null ? (_1_9_=_1_4_.c.d) != null ? _1_9_.e : undefined : undefined) === 2)");
        cmp("x = a[1]?.b()?.c?().d?.e", "x = (a[1] != null ? (_1_13_=a[1].b()) != null ? typeof (_1_16_=_1_13_.c) === \"function\" ? (_1_21_=_1_16_().d) != null ? _1_21_.e : undefined : undefined : undefined : undefined)");
        return cmp("x = a.b?[222]?(333)?.e", "x = ((_1_7_=a.b) != null ? typeof _1_7_[222] === \"function\" ? (_1_19_=_1_7_[222](333)) != null ? _1_19_.e : undefined : undefined : undefined)");
    });
    return it('functions', function() {
        cmp("f c ? '', 4", "f((c != null ? c : ''),4)");
        return cmp("a = ->\n    if b?.e?.l\n        hua\n    oga", "\na = function ()\n{\n    var _2_11_\n\n    if ((b != null ? (_2_11_=b.e) != null ? _2_11_.l : undefined : undefined))\n    {\n        hua\n    }\n    return oga\n}");
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicW1hcmsuanMiLCJzb3VyY2VSb290IjoiLi4vLi4vY29mZmVlL3Rlc3QiLCJzb3VyY2VzIjpbInFtYXJrLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRQSxNQUFlLE9BQUEsQ0FBUSxTQUFSLENBQWYsRUFBRSxhQUFGLEVBQU87O0FBRVAsUUFBQSxDQUFTLE9BQVQsRUFBaUIsU0FBQTtJQVFiLEVBQUEsQ0FBRyxTQUFILEVBQWEsU0FBQTtRQUVULEdBQUEsQ0FBSSxJQUFKLEVBQTRCLGNBQTVCO1FBQ0EsR0FBQSxDQUFJLFFBQUosRUFBNEIsa0JBQTVCO1FBQ0EsR0FBQSxDQUFJLFVBQUosRUFBNEIsb0JBQTVCO1FBQ0EsR0FBQSxDQUFJLGFBQUosRUFBNEIsOEJBQTVCO1FBQ0EsR0FBQSxDQUFJLEtBQUosRUFBNEIsbUJBQTVCO1FBRUEsR0FBQSxDQUFJLE9BQUosRUFDSSw2Q0FESjtRQU9BLEdBQUEsQ0FBSSxvQkFBSixFQUNJLHNEQURKO2VBUUEsR0FBQSxDQUFJLHVDQUFKLEVBQ0kseUVBREo7SUF2QlMsQ0FBYjtJQStCQSxFQUFBLENBQUcsSUFBSCxFQUFRLFNBQUE7UUFFSixHQUFBLENBQUksV0FBSixFQUNJLDBDQURKO2VBS0EsR0FBQSxDQUFJLGVBQUosRUFDSSw4Q0FESjtJQVBJLENBQVI7SUFrQkEsRUFBQSxDQUFHLFFBQUgsRUFBWSxTQUFBO1FBRVIsR0FBQSxDQUFJLE1BQUosRUFBNEIsZ0NBQTVCO1FBQ0EsR0FBQSxDQUFJLE1BQUosRUFBNEIsOENBQTVCO1FBQ0EsR0FBQSxDQUFJLE9BQUosRUFBNEIsaUNBQTVCO1FBQ0EsR0FBQSxDQUFJLFNBQUosRUFBNEIsbUNBQTVCO1FBQ0EsR0FBQSxDQUFJLFVBQUosRUFBNEIsOERBQTVCO1FBQ0EsR0FBQSxDQUFJLFNBQUosRUFBNEIsc0VBQTVCO1FBRUEsR0FBQSxDQUFJLE9BQUosRUFBNEIsMENBQTVCO1FBQ0EsR0FBQSxDQUFJLE9BQUosRUFBNEIseURBQTVCO1FBQ0EsR0FBQSxDQUFJLFNBQUosRUFBNEIsNkNBQTVCO1FBRUEsR0FBQSxDQUFJLHdCQUFKLEVBSVEsa0dBSlI7ZUFZQSxHQUFBLENBQUksY0FBSixFQUE0QixNQUE1QjtJQXpCUSxDQUFaO0lBaUNBLEVBQUEsQ0FBRyxVQUFILEVBQWMsU0FBQTtRQUVWLEdBQUEsQ0FBSSxTQUFKLEVBQTRCLDRDQUE1QjtRQUVBLEdBQUEsQ0FBSSxvQkFBSixFQUVRLDhGQUZSO1FBTUEsR0FBQSxDQUFJLDBCQUFKLEVBRVEscUxBRlI7ZUFNQSxHQUFBLENBQUksd0JBQUosRUFFUSxrSkFGUjtJQWhCVSxDQUFkO1dBc0JBLEVBQUEsQ0FBRyxXQUFILEVBQWUsU0FBQTtRQUVYLEdBQUEsQ0FBSSxhQUFKLEVBQW9CLDJCQUFwQjtlQUVBLEdBQUEsQ0FBSSw4Q0FBSixFQUtRLHNLQUxSO0lBSlcsQ0FBZjtBQWhIYSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuIDAwMDAwMDAgICAwMCAgICAgMDAgICAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAgICAwMDAgIFxuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMCAgIFxuMDAwIDAwIDAwICAwMDAwMDAwMDAgIDAwMDAwMDAwMCAgMDAwMDAwMCAgICAwMDAwMDAwICAgIFxuMDAwIDAwMDAgICAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMCAgIFxuIDAwMDAwIDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuIyMjXG5cbnsgY21wLCBldmwgfSA9IHJlcXVpcmUgJy4vdXRpbHMnXG5cbmRlc2NyaWJlICdxbWFyaycgLT5cblxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgICAgICAwMDAwMDAwICAwMCAgICAgMDAgIDAwMDAwMDAwICAgXG4gICAgIyAwMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgICAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiAgICAjIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAwMDAgICAgICAwMDAgICAgICAgMDAwMDAwMDAwICAwMDAwMDAwMCAgIFxuICAgICMgMDAwICAwMDAwICAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgICAgIDAwMCAgICAgICAwMDAgMCAwMDAgIDAwMCAgICAgICAgXG4gICAgIyAwMDAgICAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICBcblxuICAgIGl0ICdudWxsY21wJyAtPlxuICAgICAgICAgICAgXG4gICAgICAgIGNtcCBcImE/XCIgICAgICAgICAgICAgICAgICAgIFwiOyhhICE9IG51bGwpXCJcbiAgICAgICAgY21wIFwiYS5iLmM/XCIgICAgICAgICAgICAgICAgXCI7KGEuYi5jICE9IG51bGwpXCJcbiAgICAgICAgY21wIFwiYS5iKCkuYz9cIiAgICAgICAgICAgICAgXCI7KGEuYigpLmMgIT0gbnVsbClcIlxuICAgICAgICBjbXAgXCJpZiBhLmIoKS5jP1wiICAgICAgICAgICBcImlmICgoYS5iKCkuYyAhPSBudWxsKSlcXG57XFxufVwiXG4gICAgICAgIGNtcCBcIkBtP1wiICAgICAgICAgICAgICAgICAgIFwiOyh0aGlzLm0gIT0gbnVsbClcIlxuICAgICAgICBcbiAgICAgICAgY21wIFwiLT4gbT9cIixcbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgKGZ1bmN0aW9uICgpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtICE9IG51bGwpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXCJcIlwiXG4gICAgICAgIGNtcCBcInIuZmlsdGVyIChtKSAtPiBtP1wiLFxuICAgICAgICAgICAgXCJcIlwiXG4gICAgICAgICAgICByLmZpbHRlcihmdW5jdGlvbiAobSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKG0gIT0gbnVsbClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcIlwiXCJcbiAgICAgICAgICAgIFxuICAgICAgICBjbXAgXCJtYXRjaGVzID0gbWF0Y2hlcy5maWx0ZXIgKG0pIC0+IG1bMV0/XCIsXG4gICAgICAgICAgICBcIlwiXCJcbiAgICAgICAgICAgIG1hdGNoZXMgPSBtYXRjaGVzLmZpbHRlcihmdW5jdGlvbiAobSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1bMV0gIT0gbnVsbClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcIlwiXCJcbiAgICAgICAgICAgIFxuICAgIGl0ICc/PScgLT5cbiAgICAgICAgXG4gICAgICAgIGNtcCBcInQuYSA/PSB7fVwiLFxuICAgICAgICAgICAgXCJcIlwiXG4gICAgICAgICAgICB0LmEgPSAoKF8xXzRfPXQuYSkgIT0gbnVsbCA/IF8xXzRfIDoge30pXG4gICAgICAgICAgICBcIlwiXCJcbiAgICAgICAgXG4gICAgICAgIGNtcCBcInggPSB0LmIgPz0ge31cIixcbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgeCA9IHQuYiA9ICgoXzFfOF89dC5iKSAhPSBudWxsID8gXzFfOF8gOiB7fSlcbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgXG4gICAgIyAgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwICAgMDAwICAgICAwMDAgICAgIFxuICAgICMgMDAwMDAwMDAwICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwICAgICAgIDAwMCAgICAgXG4gICAgIyAwMDAgICAwMDAgICAgICAgMDAwICAgICAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgICAgMDAwICAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIFxuICAgIFxuICAgIGl0ICdhc3NlcnQnIC0+XG4gICAgICAgIFxuICAgICAgICBjbXAgXCJlPy5kXCIgICAgICAgICAgICAgICAgICBcIjsoZSAhPSBudWxsID8gZS5kIDogdW5kZWZpbmVkKVwiXG4gICAgICAgIGNtcCBcImU/KClcIiAgICAgICAgICAgICAgICAgICc7KHR5cGVvZiBlID09PSBcImZ1bmN0aW9uXCIgPyBlKCkgOiB1bmRlZmluZWQpJ1xuICAgICAgICBjbXAgXCJlP1sxXVwiICAgICAgICAgICAgICAgICBcIjsoZSAhPSBudWxsID8gZVsxXSA6IHVuZGVmaW5lZClcIlxuICAgICAgICBjbXAgXCJlP1sxXS5mXCIgICAgICAgICAgICAgICBcIjsoZSAhPSBudWxsID8gZVsxXS5mIDogdW5kZWZpbmVkKVwiXG4gICAgICAgIGNtcCBcImU/WzFdPy5nXCIgICAgICAgICAgICAgIFwiOyhlICE9IG51bGwgPyBlWzFdICE9IG51bGwgPyBlWzFdLmcgOiB1bmRlZmluZWQgOiB1bmRlZmluZWQpXCJcbiAgICAgICAgY21wIFwiZT8uZj8uZFwiICAgICAgICAgICAgICAgXCI7KGUgIT0gbnVsbCA/IChfMV80Xz1lLmYpICE9IG51bGwgPyBfMV80Xy5kIDogdW5kZWZpbmVkIDogdW5kZWZpbmVkKVwiXG4gICAgICAgIFxuICAgICAgICBjbXAgXCJAbT8ublwiICAgICAgICAgICAgICAgICBcIjsodGhpcy5tICE9IG51bGwgPyB0aGlzLm0ubiA6IHVuZGVmaW5lZClcIlxuICAgICAgICBjbXAgXCJAbT8gYVwiICAgICAgICAgICAgICAgICAnOyh0eXBlb2YgdGhpcy5tID09PSBcImZ1bmN0aW9uXCIgPyB0aGlzLm0oYSkgOiB1bmRlZmluZWQpJ1xuICAgICAgICBjbXAgXCJAbT8uZiBhXCIgICAgICAgICAgICAgICBcIjsodGhpcy5tICE9IG51bGwgPyB0aGlzLm0uZihhKSA6IHVuZGVmaW5lZClcIlxuICAgICAgICBcbiAgICAgICAgY21wIFwiXCJcIlxuICAgICAgICAgICAgLT5cbiAgICAgICAgICAgICAgICBzPy5jXG4gICAgICAgICAgICAgICAgcj8uZFxuICAgICAgICAgICAgXCJcIlwiIFwiXCJcIlxuICAgICAgICAgICAgKGZ1bmN0aW9uICgpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgKHMgIT0gbnVsbCA/IHMuYyA6IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gKHIgIT0gbnVsbCA/IHIuZCA6IHVuZGVmaW5lZClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcIlwiXCJcbiAgICAgICAgXG4gICAgICAgIGV2bCBcImU9MTtlP1sxXT8uZ1wiICAgICAgICAgIHVuZGVmaW5lZFxuICAgICAgICBcbiAgICAjICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwICAgICAwMCAgMDAwMDAwMCAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAgICAgXG4gICAgIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwICAgIDAwMCAgMDAwIDAgMDAwICAwMDAwMDAwICAgMDAwICAgMDAwICBcbiAgICAjIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMCAgMDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgXG4gICAgIyAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAwMDAwICAgIFxuICAgIFxuICAgIGl0ICdjb21iaW5lZCcgLT5cbiAgICAgICAgXG4gICAgICAgIGNtcCBcImU/LmNvbD9cIiAgICAgICAgICAgICAgIFwiOygoZSAhPSBudWxsID8gZS5jb2wgOiB1bmRlZmluZWQpICE9IG51bGwpXCJcbiAgICAgICAgXG4gICAgICAgIGNtcCBcIlwiXCJcbiAgICAgICAgICAgIChhLmI/LmMuZD8uZSA9PSAyKVxuICAgICAgICAgICAgXCJcIlwiIFwiXCJcIlxuICAgICAgICAgICAgOygoKF8xXzRfPWEuYikgIT0gbnVsbCA/IChfMV85Xz1fMV80Xy5jLmQpICE9IG51bGwgPyBfMV85Xy5lIDogdW5kZWZpbmVkIDogdW5kZWZpbmVkKSA9PT0gMilcbiAgICAgICAgICAgIFwiXCJcIiBcblxuICAgICAgICBjbXAgXCJcIlwiXG4gICAgICAgICAgICB4ID0gYVsxXT8uYigpPy5jPygpLmQ/LmVcbiAgICAgICAgICAgIFwiXCJcIiBcIlwiXCJcbiAgICAgICAgICAgIHggPSAoYVsxXSAhPSBudWxsID8gKF8xXzEzXz1hWzFdLmIoKSkgIT0gbnVsbCA/IHR5cGVvZiAoXzFfMTZfPV8xXzEzXy5jKSA9PT0gXCJmdW5jdGlvblwiID8gKF8xXzIxXz1fMV8xNl8oKS5kKSAhPSBudWxsID8gXzFfMjFfLmUgOiB1bmRlZmluZWQgOiB1bmRlZmluZWQgOiB1bmRlZmluZWQgOiB1bmRlZmluZWQpXG4gICAgICAgICAgICBcIlwiXCIgXG5cbiAgICAgICAgY21wIFwiXCJcIlxuICAgICAgICAgICAgeCA9IGEuYj9bMjIyXT8oMzMzKT8uZVxuICAgICAgICAgICAgXCJcIlwiIFwiXCJcIlxuICAgICAgICAgICAgeCA9ICgoXzFfN189YS5iKSAhPSBudWxsID8gdHlwZW9mIF8xXzdfWzIyMl0gPT09IFwiZnVuY3Rpb25cIiA/IChfMV8xOV89XzFfN19bMjIyXSgzMzMpKSAhPSBudWxsID8gXzFfMTlfLmUgOiB1bmRlZmluZWQgOiB1bmRlZmluZWQgOiB1bmRlZmluZWQpXG4gICAgICAgICAgICBcIlwiXCIgXG4gICAgICAgICAgICBcbiAgICBpdCAnZnVuY3Rpb25zJyAtPlxuICAgICAgICBcbiAgICAgICAgY21wIFwiZiBjID8gJycsIDRcIiAgIFwiZigoYyAhPSBudWxsID8gYyA6ICcnKSw0KVwiXG4gICAgICAgIFxuICAgICAgICBjbXAgXCJcIlwiXG4gICAgICAgICAgICBhID0gLT5cbiAgICAgICAgICAgICAgICBpZiBiPy5lPy5sXG4gICAgICAgICAgICAgICAgICAgIGh1YVxuICAgICAgICAgICAgICAgIG9nYVxuICAgICAgICAgICAgXCJcIlwiIFwiXCJcIlxuXG4gICAgICAgICAgICBhID0gZnVuY3Rpb24gKClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgXzJfMTFfXG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoKGIgIT0gbnVsbCA/IChfMl8xMV89Yi5lKSAhPSBudWxsID8gXzJfMTFfLmwgOiB1bmRlZmluZWQgOiB1bmRlZmluZWQpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaHVhXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBvZ2FcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFwiXCJcIlxuICAgIFxuICAgICAgICAgICAgICAgICAgICAiXX0=
//# sourceURL=../../coffee/test/qmark.coffee