// koffee 1.20.0

/*
00000000   00000000   000  000   000  000000000
000   000  000   000  000  0000  000     000
00000000   0000000    000  000 0 000     000
000        000   000  000  000  0000     000
000        000   000  000  000   000     000
 */
var Print, childp, fs, klor, kstr, noon, slash;

kstr = require('kstr');

klor = require('klor');

noon = require('noon');

slash = require('kslash');

childp = require('child_process');

fs = require('fs-extra');

klor.kolor.globalize();

Print = (function() {
    function Print() {}

    Print.tokens = function(header, tokens) {
        var i, len, results, tok;
        console.log(R3(y5("\n " + header)));
        console.log(b6(kstr.pad('', 80, ' ')));
        results = [];
        for (i = 0, len = tokens.length; i < len; i++) {
            tok = tokens[i];
            results.push(this.token(tok));
        }
        return results;
    };

    Print.token = function(tok) {
        var indent, ref, toktext;
        indent = kstr.lpad('', tok.col);
        if (tok.type === 'nl') {
            console.log(red('◂'));
        }
        if ((ref = tok.type) === 'ws' || ref === 'nl') {
            return;
        }
        toktext = function(tok) {
            if (tok.text === '') {
                return '\n' + indent;
            } else if (tok.text) {
                return tok.text;
            } else if (tok.tokens) {
                return '\n' + ((kstr.lpad('', 20)) + tok.indent) + (tok.tokens.map(function(t) {
                    return toktext(t);
                })).join(' ');
            } else {
                return '???';
            }
        };
        return console.log(b6(kstr.lpad(tok.line, 4)), blue(kstr.lpad(tok.col, 3)), gray(kstr.pad(tok.type, 10)), bold(yellow(indent + toktext(tok))));
    };

    Print.stack = function(stack, node, color) {
        if (color == null) {
            color = W4;
        }
        return console.log(W2(stack.join(' ') + ' ') + color(node != null ? node : ''));
    };

    Print.block = function(header, block, legend) {
        var printBlock;
        if (legend == null) {
            legend = false;
        }
        console.log(R3(y5("\n " + header)));
        printBlock = function(b) {
            var c, ci, cn, i, len, ref, ref1, ref2, ref3, s;
            if (legend) {
                s = b.indent + b6(kstr.rpad(b.line, 3)) + b5('- ' + kstr.pad(b.last, 3)) + w2(kstr.rpad(b.col, 3)) + yellow(b.tokens.length);
                s += '\n' + b.indent;
            }
            s = b.indent;
            if ((ref = b.type) === '{}' || ref === '()' || ref === '[]') {
                s += b.type[0] + ' ';
            }
            ref1 = b.tokens;
            for (i = 0, len = ref1.length; i < len; i++) {
                c = ref1[i];
                if (c.tokens != null) {
                    s += '\n' + printBlock(c) + b.indent;
                } else if (c.type === 'nl') {
                    s += '\n' + b.indent + '▸';
                } else {
                    ci = parseInt(b.indent.length / 4);
                    cn = ['g5', 'r5', 'm5', 'g3', 'r3', 'm3', 'g1', 'r1', 'm1'][ci % 8];
                    s += global[cn](((ref2 = c.text) != null ? ref2 : '') + ' ');
                }
            }
            if ((ref3 = b.type) === '{}' || ref3 === '()' || ref3 === '[]') {
                s += b.type[1];
            }
            return s;
        };
        return console.log(printBlock(block));
    };

    Print.ast = function(header, ast) {
        var i, len, node, printNode, results;
        console.log(R3(y5("\n " + header)));
        printNode = function(node, indent) {
            var i, len, name, s, value;
            if (indent == null) {
                indent = '';
            }
            s = '';
            if (!node) {
                return s;
            }
            if (node.type) {
                s += b6(kstr.lpad(node.line, 4)) + ' ' + blue(kstr.lpad(node.col, 3)) + ' ' + gray(kstr.pad(node.type, 10)) + ' ' + bold(yellow(indent + node.text) + '\n');
            } else if (node instanceof Array) {
                s += (kstr.lpad('', 19)) + ' ' + bold(w3(indent + '{'));
                for (i = 0, len = node.length; i < len; i++) {
                    value = node[i];
                    s += '\n' + printNode(value, indent);
                }
                s += (kstr.lpad('', 19)) + ' ' + bold(w3(indent + '}\n'));
            } else {
                for (name in node) {
                    value = node[name];
                    s += (kstr.lpad('', 19)) + ' ' + bold(b8(indent + name));
                    s += '\n' + printNode(value, indent + '  ');
                }
            }
            return s;
        };
        if (ast instanceof Array) {
            results = [];
            for (i = 0, len = ast.length; i < len; i++) {
                node = ast[i];
                results.push(console.log(printNode(node)));
            }
            return results;
        } else {
            return console.log(printNode(ast));
        }
    };

    Print.code = function(msg, code, ext) {
        var tmp;
        if (ext == null) {
            ext = 'js';
        }
        console.log(W1(w5(kstr.lpad(msg + ' ', 80))));
        tmp = slash.tmpfile();
        tmp = slash.swapExt(tmp, ext);
        slash.writeText(tmp, code);
        console.log(childp.execSync(__dirname + "/../node_modules/.bin/colorcat --lineNumbers " + tmp, {
            encoding: 'utf8'
        }));
        return fs.unlink(tmp);
    };

    Print.noon = function(msg, arg) {
        console.log(red(msg));
        return console.log(noon.stringify(arg, {
            colors: true
        }));
    };

    return Print;

})();

module.exports = Print;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpbnQuanMiLCJzb3VyY2VSb290IjoiLi4vY29mZmVlIiwic291cmNlcyI6WyJwcmludC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7OztBQUFBLElBQUE7O0FBUUEsSUFBQSxHQUFTLE9BQUEsQ0FBUSxNQUFSOztBQUNULElBQUEsR0FBUyxPQUFBLENBQVEsTUFBUjs7QUFDVCxJQUFBLEdBQVMsT0FBQSxDQUFRLE1BQVI7O0FBQ1QsS0FBQSxHQUFTLE9BQUEsQ0FBUSxRQUFSOztBQUNULE1BQUEsR0FBUyxPQUFBLENBQVEsZUFBUjs7QUFDVCxFQUFBLEdBQVMsT0FBQSxDQUFRLFVBQVI7O0FBRVQsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFYLENBQUE7O0FBRU07OztJQVFGLEtBQUMsQ0FBQSxNQUFELEdBQVMsU0FBQyxNQUFELEVBQVMsTUFBVDtBQUNGLFlBQUE7UUFBQSxPQUFBLENBQUMsR0FBRCxDQUFLLEVBQUEsQ0FBRyxFQUFBLENBQUcsS0FBQSxHQUFNLE1BQVQsQ0FBSCxDQUFMO1FBQXlCLE9BQUEsQ0FDeEIsR0FEd0IsQ0FDcEIsRUFBQSxDQUFHLElBQUksQ0FBQyxHQUFMLENBQVMsRUFBVCxFQUFZLEVBQVosRUFBZSxHQUFmLENBQUgsQ0FEb0I7QUFFeEI7YUFBQSx3Q0FBQTs7eUJBQ0ksSUFBQyxDQUFBLEtBQUQsQ0FBTyxHQUFQO0FBREo7O0lBSEM7O0lBTVQsS0FBQyxDQUFBLEtBQUQsR0FBUSxTQUFDLEdBQUQ7QUFFSixZQUFBO1FBQUEsTUFBQSxHQUFTLElBQUksQ0FBQyxJQUFMLENBQVUsRUFBVixFQUFhLEdBQUcsQ0FBQyxHQUFqQjtRQUFvQixJQUNkLEdBQUcsQ0FBQyxJQUFKLEtBQVksSUFERTtZQUFBLE9BQUEsQ0FDN0IsR0FENkIsQ0FDekIsR0FBQSxDQUFJLEdBQUosQ0FEeUIsRUFBQTs7UUFFN0IsV0FBVSxHQUFHLENBQUMsS0FBSixLQUFhLElBQWIsSUFBQSxHQUFBLEtBQWlCLElBQTNCO0FBQUEsbUJBQUE7O1FBQ0EsT0FBQSxHQUFVLFNBQUMsR0FBRDtZQUNOLElBQUcsR0FBRyxDQUFDLElBQUosS0FBWSxFQUFmO3VCQUF1QixJQUFBLEdBQUssT0FBNUI7YUFBQSxNQUNLLElBQUcsR0FBRyxDQUFDLElBQVA7dUJBQWlCLEdBQUcsQ0FBQyxLQUFyQjthQUFBLE1BQ0EsSUFBRyxHQUFHLENBQUMsTUFBUDt1QkFDRCxJQUFBLEdBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFMLENBQVUsRUFBVixFQUFhLEVBQWIsQ0FBRCxDQUFBLEdBQWtCLEdBQUcsQ0FBQyxNQUF2QixDQUFMLEdBQW9DLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFYLENBQWUsU0FBQyxDQUFEOzJCQUFPLE9BQUEsQ0FBUSxDQUFSO2dCQUFQLENBQWYsQ0FBRCxDQUFrQyxDQUFDLElBQW5DLENBQXdDLEdBQXhDLEVBRG5DO2FBQUEsTUFBQTt1QkFHRCxNQUhDOztRQUhDO2VBT1YsT0FBQSxDQUFBLEdBQUEsQ0FBSSxFQUFBLENBQUcsSUFBSSxDQUFDLElBQUwsQ0FBVSxHQUFHLENBQUMsSUFBZCxFQUFvQixDQUFwQixDQUFILENBQUosRUFBK0IsSUFBQSxDQUFLLElBQUksQ0FBQyxJQUFMLENBQVUsR0FBRyxDQUFDLEdBQWQsRUFBbUIsQ0FBbkIsQ0FBTCxDQUEvQixFQUEyRCxJQUFBLENBQUssSUFBSSxDQUFDLEdBQUwsQ0FBUyxHQUFHLENBQUMsSUFBYixFQUFtQixFQUFuQixDQUFMLENBQTNELEVBQXdGLElBQUEsQ0FBSyxNQUFBLENBQU8sTUFBQSxHQUFTLE9BQUEsQ0FBUSxHQUFSLENBQWhCLENBQUwsQ0FBeEY7SUFaSTs7SUFvQlIsS0FBQyxDQUFBLEtBQUQsR0FBUSxTQUFDLEtBQUQsRUFBUSxJQUFSLEVBQWMsS0FBZDs7WUFBYyxRQUFNOztlQUV6QixPQUFBLENBQUMsR0FBRCxDQUFLLEVBQUEsQ0FBRyxLQUFLLENBQUMsSUFBTixDQUFXLEdBQVgsQ0FBQSxHQUFrQixHQUFyQixDQUFBLEdBQTRCLEtBQUEsZ0JBQU0sT0FBTyxFQUFiLENBQWpDO0lBRks7O0lBVVIsS0FBQyxDQUFBLEtBQUQsR0FBUSxTQUFDLE1BQUQsRUFBUyxLQUFULEVBQWdCLE1BQWhCO0FBRUwsWUFBQTs7WUFGcUIsU0FBTzs7UUFFNUIsT0FBQSxDQUFDLEdBQUQsQ0FBSyxFQUFBLENBQUcsRUFBQSxDQUFHLEtBQUEsR0FBTSxNQUFULENBQUgsQ0FBTDtRQUNDLFVBQUEsR0FBYSxTQUFDLENBQUQ7QUFDVCxnQkFBQTtZQUFBLElBQUcsTUFBSDtnQkFDSSxDQUFBLEdBQUksQ0FBQyxDQUFDLE1BQUYsR0FBVyxFQUFBLENBQUcsSUFBSSxDQUFDLElBQUwsQ0FBVSxDQUFDLENBQUMsSUFBWixFQUFrQixDQUFsQixDQUFILENBQVgsR0FBcUMsRUFBQSxDQUFHLElBQUEsR0FBTyxJQUFJLENBQUMsR0FBTCxDQUFTLENBQUMsQ0FBQyxJQUFYLEVBQWlCLENBQWpCLENBQVYsQ0FBckMsR0FBcUUsRUFBQSxDQUFHLElBQUksQ0FBQyxJQUFMLENBQVUsQ0FBQyxDQUFDLEdBQVosRUFBaUIsQ0FBakIsQ0FBSCxDQUFyRSxHQUE4RixNQUFBLENBQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFoQjtnQkFDbEcsQ0FBQSxJQUFLLElBQUEsR0FBTyxDQUFDLENBQUMsT0FGbEI7O1lBR0EsQ0FBQSxHQUFJLENBQUMsQ0FBQztZQUNOLFdBQUcsQ0FBQyxDQUFDLEtBQUYsS0FBVyxJQUFYLElBQUEsR0FBQSxLQUFlLElBQWYsSUFBQSxHQUFBLEtBQW1CLElBQXRCO2dCQUFpQyxDQUFBLElBQUssQ0FBQyxDQUFDLElBQUssQ0FBQSxDQUFBLENBQVAsR0FBWSxJQUFsRDs7QUFDQTtBQUFBLGlCQUFBLHNDQUFBOztnQkFDSSxJQUFHLGdCQUFIO29CQUNJLENBQUEsSUFBSyxJQUFBLEdBQU8sVUFBQSxDQUFXLENBQVgsQ0FBUCxHQUF1QixDQUFDLENBQUMsT0FEbEM7aUJBQUEsTUFFSyxJQUFHLENBQUMsQ0FBQyxJQUFGLEtBQVUsSUFBYjtvQkFDRCxDQUFBLElBQUssSUFBQSxHQUFLLENBQUMsQ0FBQyxNQUFQLEdBQWMsSUFEbEI7aUJBQUEsTUFBQTtvQkFHRCxFQUFBLEdBQUssUUFBQSxDQUFTLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBVCxHQUFnQixDQUF6QjtvQkFDTCxFQUFBLEdBQUssQ0FBQyxJQUFELEVBQUssSUFBTCxFQUFTLElBQVQsRUFBYSxJQUFiLEVBQWlCLElBQWpCLEVBQXFCLElBQXJCLEVBQXlCLElBQXpCLEVBQTZCLElBQTdCLEVBQWlDLElBQWpDLENBQXVDLENBQUEsRUFBQSxHQUFHLENBQUg7b0JBQzVDLENBQUEsSUFBSyxNQUFPLENBQUEsRUFBQSxDQUFQLENBQVcsa0NBQVUsRUFBVixDQUFBLEdBQWdCLEdBQTNCLEVBTEo7O0FBSFQ7WUFTQSxZQUFHLENBQUMsQ0FBQyxLQUFGLEtBQVcsSUFBWCxJQUFBLElBQUEsS0FBZSxJQUFmLElBQUEsSUFBQSxLQUFtQixJQUF0QjtnQkFBaUMsQ0FBQSxJQUFLLENBQUMsQ0FBQyxJQUFLLENBQUEsQ0FBQSxFQUE3Qzs7bUJBQ0E7UUFoQlM7ZUFpQmIsT0FBQSxDQUFBLEdBQUEsQ0FBSSxVQUFBLENBQVcsS0FBWCxDQUFKO0lBcEJJOztJQTRCUixLQUFDLENBQUEsR0FBRCxHQUFNLFNBQUMsTUFBRCxFQUFTLEdBQVQ7QUFFSCxZQUFBO1FBQUEsT0FBQSxDQUFDLEdBQUQsQ0FBSyxFQUFBLENBQUcsRUFBQSxDQUFHLEtBQUEsR0FBTSxNQUFULENBQUgsQ0FBTDtRQUVDLFNBQUEsR0FBWSxTQUFDLElBQUQsRUFBTyxNQUFQO0FBRVIsZ0JBQUE7O2dCQUZlLFNBQU87O1lBRXRCLENBQUEsR0FBSTtZQUVKLElBQVksQ0FBSSxJQUFoQjtBQUFBLHVCQUFPLEVBQVA7O1lBRUEsSUFBRyxJQUFJLENBQUMsSUFBUjtnQkFDSSxDQUFBLElBQUssRUFBQSxDQUFHLElBQUksQ0FBQyxJQUFMLENBQVUsSUFBSSxDQUFDLElBQWYsRUFBcUIsQ0FBckIsQ0FBSCxDQUFBLEdBQTZCLEdBQTdCLEdBQW1DLElBQUEsQ0FBSyxJQUFJLENBQUMsSUFBTCxDQUFVLElBQUksQ0FBQyxHQUFmLEVBQW9CLENBQXBCLENBQUwsQ0FBbkMsR0FBaUUsR0FBakUsR0FBdUUsSUFBQSxDQUFLLElBQUksQ0FBQyxHQUFMLENBQVMsSUFBSSxDQUFDLElBQWQsRUFBb0IsRUFBcEIsQ0FBTCxDQUF2RSxHQUFzRyxHQUF0RyxHQUE0RyxJQUFBLENBQUssTUFBQSxDQUFPLE1BQUEsR0FBUyxJQUFJLENBQUMsSUFBckIsQ0FBQSxHQUE2QixJQUFsQyxFQURySDthQUFBLE1BRUssSUFBRyxJQUFBLFlBQWdCLEtBQW5CO2dCQUNELENBQUEsSUFBSyxDQUFDLElBQUksQ0FBQyxJQUFMLENBQVUsRUFBVixFQUFjLEVBQWQsQ0FBRCxDQUFBLEdBQXFCLEdBQXJCLEdBQTJCLElBQUEsQ0FBSyxFQUFBLENBQUcsTUFBQSxHQUFTLEdBQVosQ0FBTDtBQUNoQyxxQkFBQSxzQ0FBQTs7b0JBQ0ksQ0FBQSxJQUFLLElBQUEsR0FBTyxTQUFBLENBQVUsS0FBVixFQUFpQixNQUFqQjtBQURoQjtnQkFFQSxDQUFBLElBQUssQ0FBQyxJQUFJLENBQUMsSUFBTCxDQUFVLEVBQVYsRUFBYyxFQUFkLENBQUQsQ0FBQSxHQUFxQixHQUFyQixHQUEyQixJQUFBLENBQUssRUFBQSxDQUFHLE1BQUEsR0FBUyxLQUFaLENBQUwsRUFKL0I7YUFBQSxNQUFBO0FBTUQscUJBQUEsWUFBQTs7b0JBQ0ksQ0FBQSxJQUFLLENBQUMsSUFBSSxDQUFDLElBQUwsQ0FBVSxFQUFWLEVBQWMsRUFBZCxDQUFELENBQUEsR0FBcUIsR0FBckIsR0FBMkIsSUFBQSxDQUFLLEVBQUEsQ0FBRyxNQUFBLEdBQVMsSUFBWixDQUFMO29CQUNoQyxDQUFBLElBQUssSUFBQSxHQUFPLFNBQUEsQ0FBVSxLQUFWLEVBQWlCLE1BQUEsR0FBTyxJQUF4QjtBQUZoQixpQkFOQzs7bUJBU0w7UUFqQlE7UUFtQlosSUFBRyxHQUFBLFlBQWUsS0FBbEI7QUFDRztpQkFBQSxxQ0FBQTs7NkJBQUEsT0FBQSxDQUFDLEdBQUQsQ0FBSyxTQUFBLENBQVUsSUFBVixDQUFMO0FBQUE7MkJBREg7U0FBQSxNQUFBO21CQUdHLE9BQUEsQ0FBQyxHQUFELENBQUssU0FBQSxDQUFVLEdBQVYsQ0FBTCxFQUhIOztJQXZCRTs7SUFrQ04sS0FBQyxDQUFBLElBQUQsR0FBTyxTQUFDLEdBQUQsRUFBTSxJQUFOLEVBQVksR0FBWjtBQUNKLFlBQUE7O1lBRGdCLE1BQUk7O1FBQ3BCLE9BQUEsQ0FBQyxHQUFELENBQUssRUFBQSxDQUFHLEVBQUEsQ0FBRyxJQUFJLENBQUMsSUFBTCxDQUFVLEdBQUEsR0FBSSxHQUFkLEVBQWtCLEVBQWxCLENBQUgsQ0FBSCxDQUFMO1FBQ0MsR0FBQSxHQUFNLEtBQUssQ0FBQyxPQUFOLENBQUE7UUFDTixHQUFBLEdBQU0sS0FBSyxDQUFDLE9BQU4sQ0FBYyxHQUFkLEVBQW1CLEdBQW5CO1FBQ04sS0FBSyxDQUFDLFNBQU4sQ0FBZ0IsR0FBaEIsRUFBcUIsSUFBckI7UUFBeUIsT0FBQSxDQUN6QixHQUR5QixDQUNyQixNQUFNLENBQUMsUUFBUCxDQUFtQixTQUFELEdBQVcsK0NBQVgsR0FBMEQsR0FBNUUsRUFBa0Y7WUFBQSxRQUFBLEVBQVMsTUFBVDtTQUFsRixDQURxQjtlQUV6QixFQUFFLENBQUMsTUFBSCxDQUFVLEdBQVY7SUFORzs7SUFRUCxLQUFDLENBQUEsSUFBRCxHQUFPLFNBQUMsR0FBRCxFQUFNLEdBQU47UUFDSixPQUFBLENBQUMsR0FBRCxDQUFLLEdBQUEsQ0FBSSxHQUFKLENBQUw7ZUFBWSxPQUFBLENBQ1gsR0FEVyxDQUNQLElBQUksQ0FBQyxTQUFMLENBQWUsR0FBZixFQUFvQjtZQUFBLE1BQUEsRUFBTyxJQUFQO1NBQXBCLENBRE87SUFEUjs7Ozs7O0FBSVgsTUFBTSxDQUFDLE9BQVAsR0FBaUIiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcbjAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDAgICAgIDAwMFxuMDAwMDAwMDAgICAwMDAwMDAwICAgIDAwMCAgMDAwIDAgMDAwICAgICAwMDBcbjAwMCAgICAgICAgMDAwICAgMDAwICAwMDAgIDAwMCAgMDAwMCAgICAgMDAwXG4wMDAgICAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAwMDAgICAgIDAwMFxuIyMjXG5cbmtzdHIgICA9IHJlcXVpcmUgJ2tzdHInXG5rbG9yICAgPSByZXF1aXJlICdrbG9yJ1xubm9vbiAgID0gcmVxdWlyZSAnbm9vbidcbnNsYXNoICA9IHJlcXVpcmUgJ2tzbGFzaCdcbmNoaWxkcCA9IHJlcXVpcmUgJ2NoaWxkX3Byb2Nlc3MnXG5mcyAgICAgPSByZXF1aXJlICdmcy1leHRyYSdcblxua2xvci5rb2xvci5nbG9iYWxpemUoKVxuXG5jbGFzcyBQcmludFxuXG4gICAgIyAwMDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMFxuICAgICMgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgMDAwICAgMDAwICAgICAgIDAwMDAgIDAwMCAgMDAwXG4gICAgIyAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwIDAgMDAwICAwMDAwMDAwXG4gICAgIyAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAwMDAgICAgICAgMDAwICAwMDAwICAgICAgIDAwMFxuICAgICMgICAgMDAwICAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMFxuXG4gICAgQHRva2VuczogKGhlYWRlciwgdG9rZW5zKSAtPlxuICAgICAgICAgICAgbG9nIFIzIHk1IFwiXFxuICN7aGVhZGVyfVwiXG4gICAgICAgICAgICBsb2cgYjYoa3N0ci5wYWQgJycgODAgJyAnKVxuICAgICAgICAgICAgZm9yIHRvayBpbiB0b2tlbnNcbiAgICAgICAgICAgICAgICBAdG9rZW4gdG9rXG5cbiAgICBAdG9rZW46ICh0b2spIC0+XG4gICAgICAgIFxuICAgICAgICBpbmRlbnQgPSBrc3RyLmxwYWQgJycgdG9rLmNvbFxuICAgICAgICBsb2cgcmVkICfil4InIGlmIHRvay50eXBlID09ICdubCdcbiAgICAgICAgcmV0dXJuIGlmIHRvay50eXBlIGluIFsnd3MnJ25sJ11cbiAgICAgICAgdG9rdGV4dCA9ICh0b2spIC0+IFxuICAgICAgICAgICAgaWYgdG9rLnRleHQgPT0gJycgdGhlbiAnXFxuJytpbmRlbnQgXG4gICAgICAgICAgICBlbHNlIGlmIHRvay50ZXh0IHRoZW4gdG9rLnRleHQgXG4gICAgICAgICAgICBlbHNlIGlmIHRvay50b2tlbnNcbiAgICAgICAgICAgICAgICAnXFxuJysoKGtzdHIubHBhZCAnJyAyMCkrdG9rLmluZGVudCkrKHRvay50b2tlbnMubWFwICh0KSAtPiB0b2t0ZXh0KHQpKS5qb2luICcgJ1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICc/Pz8nXG4gICAgICAgIGxvZyBiNihrc3RyLmxwYWQgdG9rLmxpbmUsIDQpLCBibHVlKGtzdHIubHBhZCB0b2suY29sLCAzKSwgZ3JheShrc3RyLnBhZCB0b2sudHlwZSwgMTApLCBib2xkIHllbGxvdyhpbmRlbnQgKyB0b2t0ZXh0IHRvaylcbiAgICAgICAgICAgIFxuICAgICMgIDAwMDAwMDAgIDAwMDAwMDAwMCAgIDAwMDAwMDAgICAgMDAwMDAwMCAgMDAwICAgMDAwXG4gICAgIyAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgIDAwMFxuICAgICMgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwMDAwMDAwICAwMDAgICAgICAgMDAwMDAwMFxuICAgICMgICAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAwMDBcbiAgICAjIDAwMDAwMDAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgIDAwMCAgIDAwMFxuXG4gICAgQHN0YWNrOiAoc3RhY2ssIG5vZGUsIGNvbG9yPVc0KSAtPlxuXG4gICAgICAgIGxvZyBXMihzdGFjay5qb2luKCcgJykgKyAnICcpICsgY29sb3Igbm9kZSA/ICcnXG5cbiAgICAjIDAwMDAwMDAgICAgMDAwICAgICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgMDAwICAgMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgMDAwXG4gICAgIyAwMDAwMDAwICAgIDAwMCAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMDAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAwMDBcbiAgICAjIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAgMDAwMDAwMCAgMDAwICAgMDAwXG5cbiAgICBAYmxvY2s6IChoZWFkZXIsIGJsb2NrLCBsZWdlbmQ9ZmFsc2UpIC0+XG5cbiAgICAgICAgbG9nIFIzIHk1IFwiXFxuICN7aGVhZGVyfVwiXG4gICAgICAgIHByaW50QmxvY2sgPSAoYikgLT5cbiAgICAgICAgICAgIGlmIGxlZ2VuZFxuICAgICAgICAgICAgICAgIHMgPSBiLmluZGVudCArIGI2KGtzdHIucnBhZCBiLmxpbmUsIDMpICsgYjUoJy0gJyArIGtzdHIucGFkIGIubGFzdCwgMykgKyB3Mihrc3RyLnJwYWQgYi5jb2wsIDMpICsgeWVsbG93KGIudG9rZW5zLmxlbmd0aClcbiAgICAgICAgICAgICAgICBzICs9ICdcXG4nICsgYi5pbmRlbnRcbiAgICAgICAgICAgIHMgPSBiLmluZGVudFxuICAgICAgICAgICAgaWYgYi50eXBlIGluIFsne30nJygpJydbXSddIHRoZW4gcyArPSBiLnR5cGVbMF0gKyAnICdcbiAgICAgICAgICAgIGZvciBjIGluIGIudG9rZW5zXG4gICAgICAgICAgICAgICAgaWYgYy50b2tlbnM/XG4gICAgICAgICAgICAgICAgICAgIHMgKz0gJ1xcbicgKyBwcmludEJsb2NrKGMpICsgYi5pbmRlbnRcbiAgICAgICAgICAgICAgICBlbHNlIGlmIGMudHlwZSA9PSAnbmwnXG4gICAgICAgICAgICAgICAgICAgIHMgKz0gJ1xcbicrYi5pbmRlbnQrJ+KWuCdcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGNpID0gcGFyc2VJbnQgYi5pbmRlbnQubGVuZ3RoLzRcbiAgICAgICAgICAgICAgICAgICAgY24gPSBbJ2c1JydyNScnbTUnJ2czJydyMycnbTMnJ2cxJydyMScnbTEnXVtjaSU4XVxuICAgICAgICAgICAgICAgICAgICBzICs9IGdsb2JhbFtjbl0gKGMudGV4dCA/ICcnKSArICcgJ1xuICAgICAgICAgICAgaWYgYi50eXBlIGluIFsne30nJygpJydbXSddIHRoZW4gcyArPSBiLnR5cGVbMV1cbiAgICAgICAgICAgIHNcbiAgICAgICAgbG9nIHByaW50QmxvY2sgYmxvY2tcblxuICAgICMgIDAwMDAwMDAgICAgMDAwMDAwMCAgMDAwMDAwMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgICAgICAgICAwMDBcbiAgICAjIDAwMDAwMDAwMCAgMDAwMDAwMCAgICAgIDAwMFxuICAgICMgMDAwICAgMDAwICAgICAgIDAwMCAgICAgMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAgICAgICAwMDBcblxuICAgIEBhc3Q6IChoZWFkZXIsIGFzdCkgLT5cblxuICAgICAgICBsb2cgUjMgeTUgXCJcXG4gI3toZWFkZXJ9XCJcblxuICAgICAgICBwcmludE5vZGUgPSAobm9kZSwgaW5kZW50PScnKSAtPlxuXG4gICAgICAgICAgICBzID0gJydcblxuICAgICAgICAgICAgcmV0dXJuIHMgaWYgbm90IG5vZGVcblxuICAgICAgICAgICAgaWYgbm9kZS50eXBlXG4gICAgICAgICAgICAgICAgcyArPSBiNihrc3RyLmxwYWQgbm9kZS5saW5lLCA0KSArICcgJyArIGJsdWUoa3N0ci5scGFkIG5vZGUuY29sLCAzKSArICcgJyArIGdyYXkoa3N0ci5wYWQgbm9kZS50eXBlLCAxMCkgKyAnICcgKyBib2xkIHllbGxvdyhpbmRlbnQgKyBub2RlLnRleHQpICsgJ1xcbidcbiAgICAgICAgICAgIGVsc2UgaWYgbm9kZSBpbnN0YW5jZW9mIEFycmF5XG4gICAgICAgICAgICAgICAgcyArPSAoa3N0ci5scGFkICcnLCAxOSkgKyAnICcgKyBib2xkIHczKGluZGVudCArICd7JylcbiAgICAgICAgICAgICAgICBmb3IgdmFsdWUgaW4gbm9kZVxuICAgICAgICAgICAgICAgICAgICBzICs9ICdcXG4nICsgcHJpbnROb2RlIHZhbHVlLCBpbmRlbnRcbiAgICAgICAgICAgICAgICBzICs9IChrc3RyLmxwYWQgJycsIDE5KSArICcgJyArIGJvbGQgdzMoaW5kZW50ICsgJ31cXG4nKVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGZvciBuYW1lLHZhbHVlIG9mIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgcyArPSAoa3N0ci5scGFkICcnLCAxOSkgKyAnICcgKyBib2xkIGI4KGluZGVudCArIG5hbWUpXG4gICAgICAgICAgICAgICAgICAgIHMgKz0gJ1xcbicgKyBwcmludE5vZGUgdmFsdWUsIGluZGVudCsnICAnXG4gICAgICAgICAgICBzXG5cbiAgICAgICAgaWYgYXN0IGluc3RhbmNlb2YgQXJyYXlcbiAgICAgICAgICAgIGxvZyBwcmludE5vZGUgbm9kZSBmb3Igbm9kZSBpbiBhc3RcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbG9nIHByaW50Tm9kZSBhc3RcblxuICAgICMgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwMFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDBcbiAgICAjIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDBcbiAgICAjICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgICAgMDAwMDAwMDBcblxuICAgIEBjb2RlOiAobXNnLCBjb2RlLCBleHQ9J2pzJykgLT5cbiAgICAgICAgbG9nIFcxIHc1IGtzdHIubHBhZCBtc2crJyAnIDgwXG4gICAgICAgIHRtcCA9IHNsYXNoLnRtcGZpbGUoKVxuICAgICAgICB0bXAgPSBzbGFzaC5zd2FwRXh0IHRtcCwgZXh0XG4gICAgICAgIHNsYXNoLndyaXRlVGV4dCB0bXAsIGNvZGVcbiAgICAgICAgbG9nIGNoaWxkcC5leGVjU3luYyBcIiN7X19kaXJuYW1lfS8uLi9ub2RlX21vZHVsZXMvLmJpbi9jb2xvcmNhdCAtLWxpbmVOdW1iZXJzICN7dG1wfVwiIGVuY29kaW5nOid1dGY4J1xuICAgICAgICBmcy51bmxpbmsgdG1wXG5cbiAgICBAbm9vbjogKG1zZywgYXJnKSAtPlxuICAgICAgICBsb2cgcmVkIG1zZ1xuICAgICAgICBsb2cgbm9vbi5zdHJpbmdpZnkgYXJnLCBjb2xvcnM6dHJ1ZVxuXG5tb2R1bGUuZXhwb3J0cyA9IFByaW50XG4iXX0=
//# sourceURL=../coffee/print.coffee