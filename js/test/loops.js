// koffee 1.20.0

/*
000       0000000    0000000   00000000    0000000
000      000   000  000   000  000   000  000
000      000   000  000   000  00000000   0000000
000      000   000  000   000  000             000
0000000   0000000    0000000   000        0000000
 */
var cmp, evl, ref;

ref = require('./utils'), cmp = ref.cmp, evl = ref.evl;

describe('loops', function() {
    it('for in', function() {
        cmp("for x in [3...4]", "for (x = 3; x < 4; x++)\n{\n}");
        cmp("for x in [3..4]", "for (x = 3; x <= 4; x++)\n{\n}");
        cmp("for x in 5..6", "for (x = 5; x <= 6; x++)\n{\n}");
        cmp("for x in 5..6", "for (x = 5; x <= 6; x++)\n{\n}");
        cmp("for x in 15..4", "for (x = 15; x >= 4; x--)\n{\n}");
        cmp("for t in l\n    t", "var list = (l != null ? l : [])\nfor (var _1_6_ = 0; _1_6_ < list.length; _1_6_++)\n{\n    t = list[_1_6_]\n    t\n}");
        cmp("for a in [1,2,3] then log a", "var list = [1,2,3]\nfor (var _1_6_ = 0; _1_6_ < list.length; _1_6_++)\n{\n    a = list[_1_6_]\n    console.log(a)\n}");
        cmp("for a in [1,2,3] then log a\nlog a", "var list = [1,2,3]\nfor (var _1_6_ = 0; _1_6_ < list.length; _1_6_++)\n{\n    a = list[_1_6_]\n    console.log(a)\n}\nconsole.log(a)");
        cmp("for a in [1,2,3]\n    log '1' a\n    log '2' a\nlog '3' a", "var list = [1,2,3]\nfor (var _1_6_ = 0; _1_6_ < list.length; _1_6_++)\n{\n    a = list[_1_6_]\n    console.log('1',a)\n    console.log('2',a)\n}\nconsole.log('3',a)");
        cmp("for v,i in @regs\n    log i,v", "var list = (this.regs != null ? this.regs : [])\nfor (i = 0; i < list.length; i++)\n{\n    v = list[i]\n    console.log(i,v)\n}");
        cmp("for [a,b] in @regs\n    log a,b", "var list = (this.regs != null ? this.regs : [])\nfor (var _1_10_ = 0; _1_10_ < list.length; _1_10_++)\n{\n    a = list[_1_10_][0]\n    b = list[_1_10_][1]\n    console.log(a,b)\n}");
        cmp("for a in [1..2] then for b in [1..3] then c = 1; d = 1", "for (a = 1; a <= 2; a++)\n{\n    for (b = 1; b <= 3; b++)\n    {\n        c = 1\n        d = 1\n    }\n}");
        cmp("for a in [1..9] then for b in [1..9]\n    c = 3\n    d:\n        e: 1", "for (a = 1; a <= 9; a++)\n{\n    for (b = 1; b <= 9; b++)\n    {\n        c = 3\n        {d:{e:1}}\n    }\n}");
        cmp("empty = (a) -> a in ['' null undefined] or b", "\nempty = function (a)\n{\n    return [].indexOf.call(['',null,undefined], a) >= 0 || b\n}");
        return cmp("@exp body.exps,k,e for e,k in body.exps", "var list = (body.exps != null ? body.exps : [])\nfor (k = 0; k < list.length; k++)\n{\n    e = list[k]\n    this.exp(body.exps,k,e)\n}");
    });
    it('for of', function() {
        cmp("for key,val of @patterns\n    log key, val", "for (key in this.patterns)\n{\n    val = this.patterns[key]\n    console.log(key,val)\n}");
        return cmp("matches = ([k, r.exec t] for k,r of rgs)", "matches = (function () { var result = []; for (var k in rgs)  { var r = rgs[k];result.push([k,r.exec(t)])  } return result }).bind(this)()");
    });
    it('for tail', function() {
        return cmp("f e for e in l ? []", "var list = (l != null ? l : [])\nfor (var _1_10_ = 0; _1_10_ < list.length; _1_10_++)\n{\n    e = list[_1_10_]\n    f(e)\n}");
    });
    it('list comprehension', function() {
        cmp("m = ([k, r.exec t] for k,r of rgs)", "m = (function () { var result = []; for (var k in rgs)  { var r = rgs[k];result.push([k,r.exec(t)])  } return result }).bind(this)()");
        cmp("m = ([i, k] for k,i in rgs)", "m = (function () { var result = []; var list = (rgs != null ? rgs : []); for (i = 0; i < list.length; i++)  { var k = list[i];result.push([i,k])  } return result }).bind(this)()");
        evl("1", 1);
        evl("'abc'", 'abc');
        evl("[1,2,3]", [1, 2, 3]);
        evl("[i for i in [1,2,3]]", [1, 2, 3]);
        evl("(i for i in [1,2,3])", [1, 2, 3]);
        evl("[i*2 for i in [1,2,3]]", [2, 4, 6]);
        evl("(i+3 for i in [1,2,3])", [4, 5, 6]);
        evl("(k for k of {a:1,b:2,c:3})", ['a', 'b', 'c']);
        evl("(v*v for k,v of {a:1,b:2,c:3})", [1, 4, 9]);
        evl("(''+i+' '+v for i,v of [5,4,3])", ['0 5', '1 4', '2 3']);
        return evl('((-> (a={})[v]=k; a)() for k,v of {a:1,b:2,c:3})', [
            {
                '1': 'a'
            }, {
                '2': 'b'
            }, {
                '3': 'c'
            }
        ]);
    });
    it('each', function() {
        cmp("{a:1,b:2}", "{a:1,b:2}");
        evl("a = {a:1,b:2}", {
            a: 1,
            b: 2
        });
        evl("a = {a:1,b:2} each (k,v) -> [k, v*3]", {
            a: 3,
            b: 6
        });
        evl("a = {a:1,b:2} each (k,v) -> ['▸'+k, v]", {
            '▸a': 1,
            '▸b': 2
        });
        evl("a = [1,2,3] each (i,v) -> [i, v]", [1, 2, 3]);
        evl("a = [1,2,3] each (i,v) -> [2-i, v]", [3, 2, 1]);
        evl("a = [1,3]   each (i,v) -> [1-i,v*v]", [9, 1]);
        evl("a = ['3''2''1'] each (i,v) -> [i, v+'▸'+i]", ['3▸0', '2▸1', '1▸2']);
        evl("a = 'hello' each (i,c) -> [i,c+c]", "hheelllloo");
        return evl("a = 'hello world' each (i,c) -> [i,i%2 and c.toUpperCase() or c]", "hElLo wOrLd");
    });
    it('each single', function() {
        evl("a = '' each ->", '');
        evl("a = {} each ->", {});
        evl("a = [] each ->", []);
        evl("a = [1,2] each -> 'a'", ['a', 'a']);
        evl("a = [1,2] each ->", []);
        evl("a = [1,2,3] each (v) -> v", [1, 2, 3]);
        return evl("a = {a:1,b:2} each (v) -> v*3", {
            a: 3,
            b: 6
        });
    });
    return it('while', function() {
        cmp("while true\n    log 4", "while (true)\n{\n    console.log(4)\n}");
        cmp("while true then log 5", "while (true)\n{\n    console.log(5)\n}");
        return cmp("while a == b then log c; log d\nlog e", "while (a === b)\n{\n    console.log(c)\n    console.log(d)\n}\nconsole.log(e)");
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9vcHMuanMiLCJzb3VyY2VSb290IjoiLi4vLi4vY29mZmVlL3Rlc3QiLCJzb3VyY2VzIjpbImxvb3BzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRQSxNQUFlLE9BQUEsQ0FBUSxTQUFSLENBQWYsRUFBRSxhQUFGLEVBQU87O0FBRVAsUUFBQSxDQUFTLE9BQVQsRUFBaUIsU0FBQTtJQVFiLEVBQUEsQ0FBRyxRQUFILEVBQVksU0FBQTtRQUVSLEdBQUEsQ0FBSSxrQkFBSixFQUNJLCtCQURKO1FBT0EsR0FBQSxDQUFJLGlCQUFKLEVBQ0ksZ0NBREo7UUFPQSxHQUFBLENBQUksZUFBSixFQUNJLGdDQURKO1FBT0EsR0FBQSxDQUFJLGVBQUosRUFDSSxnQ0FESjtRQU9BLEdBQUEsQ0FBSSxnQkFBSixFQUNJLGlDQURKO1FBT0EsR0FBQSxDQUFJLG1CQUFKLEVBR1Esc0hBSFI7UUFZQSxHQUFBLENBQUksNkJBQUosRUFFUSxzSEFGUjtRQVdBLEdBQUEsQ0FBSSxvQ0FBSixFQUdRLHNJQUhSO1FBYUEsR0FBQSxDQUFJLDJEQUFKLEVBS1Esc0tBTFI7UUFnQkEsR0FBQSxDQUFJLCtCQUFKLEVBR1EsaUlBSFI7UUFZQSxHQUFBLENBQUksaUNBQUosRUFHUSxxTEFIUjtRQWFBLEdBQUEsQ0FBSSx3REFBSixFQUVRLDBHQUZSO1FBYUEsR0FBQSxDQUFJLHVFQUFKLEVBS1EsOEdBTFI7UUFnQkEsR0FBQSxDQUFJLDhDQUFKLEVBRVEsNEZBRlI7ZUFVQSxHQUFBLENBQUkseUNBQUosRUFFUSx3SUFGUjtJQXpKUSxDQUFaO0lBMEtBLEVBQUEsQ0FBRyxRQUFILEVBQVksU0FBQTtRQUVSLEdBQUEsQ0FBSSw0Q0FBSixFQUdRLDBGQUhSO2VBV0EsR0FBQSxDQUFJLDBDQUFKLEVBRVEsNElBRlI7SUFiUSxDQUFaO0lBeUJBLEVBQUEsQ0FBRyxVQUFILEVBQWMsU0FBQTtlQUVWLEdBQUEsQ0FBSSxxQkFBSixFQUVRLDZI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QUFILEVBQVcsU0FBQTtRQUVQLEdBQUEsQ0FBSSx1QkFBSixFQUdRLHdDQUhSO1FBVUEsR0FBQSxDQUFJLHVCQUFKLEVBRVEsd0NBRlI7ZUFTQSxHQUFBLENBQUksdUNBQUosRUFHUSwrRUFIUjtJQXJCTyxDQUFYO0FBNVJhLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4wMDAgICAgICAgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMDAgICAgMDAwMDAwMFxuMDAwICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwXG4wMDAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgICAwMDAwMDAwXG4wMDAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICAgICAgIDAwMFxuMDAwMDAwMCAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMCAgICAgICAgMDAwMDAwMFxuIyMjXG5cbnsgY21wLCBldmwgfSA9IHJlcXVpcmUgJy4vdXRpbHMnXG5cbmRlc2NyaWJlICdsb29wcycgLT5cblxuICAgICMgMDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAgICAgICAgICAwMDAgIDAwMCAgIDAwMFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAgICAwMDAgIDAwMDAgIDAwMFxuICAgICMgMDAwMDAwICAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgICAgICAwMDAgIDAwMCAwIDAwMFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAgICAwMDAgIDAwMCAgMDAwMFxuICAgICMgMDAwICAgICAgICAwMDAwMDAwICAgMDAwICAgMDAwICAgICAgICAwMDAgIDAwMCAgIDAwMFxuXG4gICAgaXQgJ2ZvciBpbicgLT5cbiAgICAgICAgXG4gICAgICAgIGNtcCBcImZvciB4IGluIFszLi4uNF1cIixcbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgZm9yICh4ID0gMzsgeCA8IDQ7IHgrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFwiXCJcIlxuXG4gICAgICAgIGNtcCBcImZvciB4IGluIFszLi40XVwiLFxuICAgICAgICAgICAgXCJcIlwiXG4gICAgICAgICAgICBmb3IgKHggPSAzOyB4IDw9IDQ7IHgrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFwiXCJcIlxuXG4gICAgICAgIGNtcCBcImZvciB4IGluIDUuLjZcIixcbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgZm9yICh4ID0gNTsgeCA8PSA2OyB4KyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcIlwiXCJcblxuICAgICAgICBjbXAgXCJmb3IgeCBpbiA1Li42XCIsXG4gICAgICAgICAgICBcIlwiXCJcbiAgICAgICAgICAgIGZvciAoeCA9IDU7IHggPD0gNjsgeCsrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXCJcIlwiXG5cbiAgICAgICAgY21wIFwiZm9yIHggaW4gMTUuLjRcIixcbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgZm9yICh4ID0gMTU7IHggPj0gNDsgeC0tKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXCJcIlwiXG4gICAgICAgICAgICBcbiAgICAgICAgY21wIFwiXCJcIlxuICAgICAgICAgICAgZm9yIHQgaW4gbFxuICAgICAgICAgICAgICAgIHRcbiAgICAgICAgICAgIFwiXCJcIiBcIlwiXCJcbiAgICAgICAgICAgIHZhciBsaXN0ID0gKGwgIT0gbnVsbCA/IGwgOiBbXSlcbiAgICAgICAgICAgIGZvciAodmFyIF8xXzZfID0gMDsgXzFfNl8gPCBsaXN0Lmxlbmd0aDsgXzFfNl8rKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ID0gbGlzdFtfMV82X11cbiAgICAgICAgICAgICAgICB0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcIlwiXCJcblxuICAgICAgICBjbXAgXCJcIlwiXG4gICAgICAgICAgICBmb3IgYSBpbiBbMSwyLDNdIHRoZW4gbG9nIGFcbiAgICAgICAgICAgIFwiXCJcIiBcIlwiXCJcbiAgICAgICAgICAgIHZhciBsaXN0ID0gWzEsMiwzXVxuICAgICAgICAgICAgZm9yICh2YXIgXzFfNl8gPSAwOyBfMV82XyA8IGxpc3QubGVuZ3RoOyBfMV82XysrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGEgPSBsaXN0W18xXzZfXVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcIlwiXCJcblxuICAgICAgICBjbXAgXCJcIlwiXG4gICAgICAgICAgICBmb3IgYSBpbiBbMSwyLDNdIHRoZW4gbG9nIGFcbiAgICAgICAgICAgIGxvZyBhXG4gICAgICAgICAgICBcIlwiXCIgXCJcIlwiXG4gICAgICAgICAgICB2YXIgbGlzdCA9IFsxLDIsM11cbiAgICAgICAgICAgIGZvciAodmFyIF8xXzZfID0gMDsgXzFfNl8gPCBsaXN0Lmxlbmd0aDsgXzFfNl8rKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhID0gbGlzdFtfMV82X11cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc29sZS5sb2coYSlcbiAgICAgICAgICAgIFwiXCJcIlxuXG4gICAgICAgIGNtcCBcIlwiXCJcbiAgICAgICAgICAgIGZvciBhIGluIFsxLDIsM11cbiAgICAgICAgICAgICAgICBsb2cgJzEnIGFcbiAgICAgICAgICAgICAgICBsb2cgJzInIGFcbiAgICAgICAgICAgIGxvZyAnMycgYVxuICAgICAgICAgICAgXCJcIlwiIFwiXCJcIlxuICAgICAgICAgICAgdmFyIGxpc3QgPSBbMSwyLDNdXG4gICAgICAgICAgICBmb3IgKHZhciBfMV82XyA9IDA7IF8xXzZfIDwgbGlzdC5sZW5ndGg7IF8xXzZfKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYSA9IGxpc3RbXzFfNl9dXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJzEnLGEpXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJzInLGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnMycsYSlcbiAgICAgICAgICAgIFwiXCJcIlxuXG4gICAgICAgIGNtcCBcIlwiXCJcbiAgICAgICAgICAgIGZvciB2LGkgaW4gQHJlZ3NcbiAgICAgICAgICAgICAgICBsb2cgaSx2XG4gICAgICAgICAgICBcIlwiXCIgXCJcIlwiXG4gICAgICAgICAgICB2YXIgbGlzdCA9ICh0aGlzLnJlZ3MgIT0gbnVsbCA/IHRoaXMucmVncyA6IFtdKVxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdiA9IGxpc3RbaV1cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpLHYpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcIlwiXCJcblxuICAgICAgICBjbXAgXCJcIlwiXG4gICAgICAgICAgICBmb3IgW2EsYl0gaW4gQHJlZ3NcbiAgICAgICAgICAgICAgICBsb2cgYSxiXG4gICAgICAgICAgICBcIlwiXCIgXCJcIlwiXG4gICAgICAgICAgICB2YXIgbGlzdCA9ICh0aGlzLnJlZ3MgIT0gbnVsbCA/IHRoaXMucmVncyA6IFtdKVxuICAgICAgICAgICAgZm9yICh2YXIgXzFfMTBfID0gMDsgXzFfMTBfIDwgbGlzdC5sZW5ndGg7IF8xXzEwXysrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGEgPSBsaXN0W18xXzEwX11bMF1cbiAgICAgICAgICAgICAgICBiID0gbGlzdFtfMV8xMF9dWzFdXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYSxiKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXCJcIlwiXG5cbiAgICAgICAgY21wIFwiXCJcIlxuICAgICAgICAgICAgZm9yIGEgaW4gWzEuLjJdIHRoZW4gZm9yIGIgaW4gWzEuLjNdIHRoZW4gYyA9IDE7IGQgPSAxXG4gICAgICAgICAgICBcIlwiXCIgXCJcIlwiXG4gICAgICAgICAgICBmb3IgKGEgPSAxOyBhIDw9IDI7IGErKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmb3IgKGIgPSAxOyBiIDw9IDM7IGIrKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGMgPSAxXG4gICAgICAgICAgICAgICAgICAgIGQgPSAxXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXCJcIlwiXG5cbiAgICAgICAgY21wIFwiXCJcIlxuICAgICAgICAgICAgZm9yIGEgaW4gWzEuLjldIHRoZW4gZm9yIGIgaW4gWzEuLjldXG4gICAgICAgICAgICAgICAgYyA9IDNcbiAgICAgICAgICAgICAgICBkOlxuICAgICAgICAgICAgICAgICAgICBlOiAxXG4gICAgICAgICAgICBcIlwiXCIgXCJcIlwiXG4gICAgICAgICAgICBmb3IgKGEgPSAxOyBhIDw9IDk7IGErKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmb3IgKGIgPSAxOyBiIDw9IDk7IGIrKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGMgPSAzXG4gICAgICAgICAgICAgICAgICAgIHtkOntlOjF9fVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgXG4gICAgICAgIGNtcCBcIlwiXCJcbiAgICAgICAgICAgIGVtcHR5ID0gKGEpIC0+IGEgaW4gWycnIG51bGwgdW5kZWZpbmVkXSBvciBiXG4gICAgICAgICAgICBcIlwiXCIgXCJcIlwiXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGVtcHR5ID0gZnVuY3Rpb24gKGEpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdLmluZGV4T2YuY2FsbChbJycsbnVsbCx1bmRlZmluZWRdLCBhKSA+PSAwIHx8IGJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgXG4gICAgICAgIGNtcCBcIlwiXCJcbiAgICAgICAgICAgIEBleHAgYm9keS5leHBzLGssZSBmb3IgZSxrIGluIGJvZHkuZXhwc1xuICAgICAgICAgICAgXCJcIlwiIFwiXCJcIlxuICAgICAgICAgICAgdmFyIGxpc3QgPSAoYm9keS5leHBzICE9IG51bGwgPyBib2R5LmV4cHMgOiBbXSlcbiAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBsaXN0Lmxlbmd0aDsgaysrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGUgPSBsaXN0W2tdXG4gICAgICAgICAgICAgICAgdGhpcy5leHAoYm9keS5leHBzLGssZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgXG4gICAgIyAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgICAgICAgICAwMDAwMDAwICAgMDAwMDAwMDBcbiAgICAjIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgICAgMDAwICAgMDAwICAwMDBcbiAgICAjIDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMDAwMDAgICAgICAgICAgMDAwICAgMDAwICAwMDAwMDBcbiAgICAjIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgICAgMDAwICAgMDAwICAwMDBcbiAgICAjIDAwMCAgICAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgICAgICAgIDAwMDAwMDAgICAwMDBcblxuICAgIGl0ICdmb3Igb2YnIC0+XG5cbiAgICAgICAgY21wIFwiXCJcIlxuICAgICAgICAgICAgZm9yIGtleSx2YWwgb2YgQHBhdHRlcm5zXG4gICAgICAgICAgICAgICAgbG9nIGtleSwgdmFsXG4gICAgICAgICAgICBcIlwiXCIgXCJcIlwiXG4gICAgICAgICAgICBmb3IgKGtleSBpbiB0aGlzLnBhdHRlcm5zKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhbCA9IHRoaXMucGF0dGVybnNba2V5XVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGtleSx2YWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcIlwiXCJcbiAgICAgICAgICAgIFxuICAgICAgICBjbXAgXCJcIlwiXG4gICAgICAgICAgICBtYXRjaGVzID0gKFtrLCByLmV4ZWMgdF0gZm9yIGssciBvZiByZ3MpXG4gICAgICAgICAgICBcIlwiXCIgXCJcIlwiXG4gICAgICAgICAgICBtYXRjaGVzID0gKGZ1bmN0aW9uICgpIHsgdmFyIHJlc3VsdCA9IFtdOyBmb3IgKHZhciBrIGluIHJncykgIHsgdmFyIHIgPSByZ3Nba107cmVzdWx0LnB1c2goW2ssci5leGVjKHQpXSkgIH0gcmV0dXJuIHJlc3VsdCB9KS5iaW5kKHRoaXMpKClcbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgXG4gICAgIyAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgICAgICAgIDAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgIDAwMCAgICAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAgICBcbiAgICAjIDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMDAwMDAgICAgICAgICAgICAgMDAwICAgICAwMDAwMDAwMDAgIDAwMCAgMDAwICAgICAgXG4gICAgIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgICAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgIDAwMCAgICAgIFxuICAgICMgMDAwICAgICAgICAwMDAwMDAwICAgMDAwICAgMDAwICAgICAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAwMDAwICBcbiAgICBcbiAgICBpdCAnZm9yIHRhaWwnIC0+XG4gICAgICAgIFxuICAgICAgICBjbXAgXCJcIlwiXG4gICAgICAgICAgICBmIGUgZm9yIGUgaW4gbCA/IFtdXG4gICAgICAgICAgICBcIlwiXCIgXCJcIlwiXG4gICAgICAgICAgICB2YXIgbGlzdCA9IChsICE9IG51bGwgPyBsIDogW10pXG4gICAgICAgICAgICBmb3IgKHZhciBfMV8xMF8gPSAwOyBfMV8xMF8gPCBsaXN0Lmxlbmd0aDsgXzFfMTBfKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZSA9IGxpc3RbXzFfMTBfXVxuICAgICAgICAgICAgICAgIGYoZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgXG4gICAgIyAwMDAgICAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMCAgICAgMDAgIDAwMDAwMDAwICAgXG4gICAgIyAwMDAgICAgICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAgICAgICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAwMDAwMDAgIDAwMDAwMDAwICAgXG4gICAgIyAwMDAgICAgICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgMCAwMDAgIDAwMCAgICAgICAgXG4gICAgIyAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMCAgICAgICAgXG4gICAgXG4gICAgaXQgJ2xpc3QgY29tcHJlaGVuc2lvbicgLT5cbiAgICAgICAgXG4gICAgICAgIGNtcCBcIm0gPSAoW2ssIHIuZXhlYyB0XSBmb3IgayxyIG9mIHJncylcIixcbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgbSA9IChmdW5jdGlvbiAoKSB7IHZhciByZXN1bHQgPSBbXTsgZm9yICh2YXIgayBpbiByZ3MpICB7IHZhciByID0gcmdzW2tdO3Jlc3VsdC5wdXNoKFtrLHIuZXhlYyh0KV0pICB9IHJldHVybiByZXN1bHQgfSkuYmluZCh0aGlzKSgpXG4gICAgICAgICAgICBcIlwiXCJcblxuICAgICAgICBjbXAgXCJtID0gKFtpLCBrXSBmb3IgayxpIGluIHJncylcIixcbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgbSA9IChmdW5jdGlvbiAoKSB7IHZhciByZXN1bHQgPSBbXTsgdmFyIGxpc3QgPSAocmdzICE9IG51bGwgPyByZ3MgOiBbXSk7IGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSAgeyB2YXIgayA9IGxpc3RbaV07cmVzdWx0LnB1c2goW2ksa10pICB9IHJldHVybiByZXN1bHQgfSkuYmluZCh0aGlzKSgpXG4gICAgICAgICAgICBcIlwiXCJcbiAgICAgICAgICAgIFxuICAgICAgICBldmwgXCIxXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxXG4gICAgICAgIGV2bCBcIidhYmMnXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhYmMnXG4gICAgICAgIGV2bCBcIlsxLDIsM11cIiAgICAgICAgICAgICAgICAgICAgICAgICAgIFsxLDIsM11cbiAgICAgICAgZXZsIFwiW2kgZm9yIGkgaW4gWzEsMiwzXV1cIiAgICAgICAgICAgICAgWyAxLCAyLCAzIF1cbiAgICAgICAgZXZsIFwiKGkgZm9yIGkgaW4gWzEsMiwzXSlcIiAgICAgICAgICAgICAgWyAxLCAyLCAzIF1cbiAgICAgICAgZXZsIFwiW2kqMiBmb3IgaSBpbiBbMSwyLDNdXVwiICAgICAgICAgICAgWyAyLCA0LCA2IF1cbiAgICAgICAgZXZsIFwiKGkrMyBmb3IgaSBpbiBbMSwyLDNdKVwiICAgICAgICAgICAgWyA0LCA1LCA2IF1cbiAgICAgICAgZXZsIFwiKGsgZm9yIGsgb2Yge2E6MSxiOjIsYzozfSlcIiAgICAgICAgWyAnYScgJ2InICdjJyBdXG4gICAgICAgIGV2bCBcIih2KnYgZm9yIGssdiBvZiB7YToxLGI6MixjOjN9KVwiICAgIFsgMSA0IDkgXVxuICAgICAgICBldmwgXCIoJycraSsnICcrdiBmb3IgaSx2IG9mIFs1LDQsM10pXCIgICBbICcwIDUnICcxIDQnICcyIDMnIF1cbiAgICAgICAgZXZsICcoKC0+IChhPXt9KVt2XT1rOyBhKSgpIGZvciBrLHYgb2Yge2E6MSxiOjIsYzozfSknICBbIHsnMSc6J2EnfSB7JzInOidiJ30geyczJzonYyd9IF1cblxuICAgICMgMDAwMDAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICBcbiAgICAjIDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMCAgICAgICAwMDAwMDAwMDAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAwMDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgMDAwICAgMDAwICBcbiAgICBcbiAgICBpdCAnZWFjaCcgLT5cbiAgICAgICAgXG4gICAgICAgIGNtcCBcInthOjEsYjoyfVwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwie2E6MSxiOjJ9XCJcblxuICAgICAgICBldmwgXCJhID0ge2E6MSxiOjJ9XCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YToxLGI6Mn1cbiAgICAgICAgZXZsIFwiYSA9IHthOjEsYjoyfSBlYWNoIChrLHYpIC0+IFtrLCB2KjNdXCIgICAgICAgICAge2E6MyxiOjZ9XG4gICAgICAgIGV2bCBcImEgPSB7YToxLGI6Mn0gZWFjaCAoayx2KSAtPiBbJ+KWuCcraywgdl1cIiAgICAgICAgeyfilrhhJzoxLCfilrhiJzoyfVxuICAgICAgICBcbiAgICAgICAgZXZsIFwiYSA9IFsxLDIsM10gZWFjaCAoaSx2KSAtPiBbaSwgdl1cIiAgICAgICAgICAgICAgWzEsMiwzXVxuICAgICAgICBldmwgXCJhID0gWzEsMiwzXSBlYWNoIChpLHYpIC0+IFsyLWksIHZdXCIgICAgICAgICAgICBbMywyLDFdXG4gICAgICAgIGV2bCBcImEgPSBbMSwzXSAgIGVhY2ggKGksdikgLT4gWzEtaSx2KnZdXCIgICAgICAgICAgIFs5LDFdXG4gICAgICAgIGV2bCBcImEgPSBbJzMnJzInJzEnXSBlYWNoIChpLHYpIC0+IFtpLCB2KyfilrgnK2ldXCIgICAgWycz4pa4MCcgJzLilrgxJyAnMeKWuDInXVxuICAgICAgICBldmwgXCJhID0gJ2hlbGxvJyBlYWNoIChpLGMpIC0+IFtpLGMrY11cIiAgICAgICAgICAgICBcImhoZWVsbGxsb29cIlxuICAgICAgICBldmwgXCJhID0gJ2hlbGxvIHdvcmxkJyBlYWNoIChpLGMpIC0+IFtpLGklMiBhbmQgYy50b1VwcGVyQ2FzZSgpIG9yIGNdXCIgICAgXCJoRWxMbyB3T3JMZFwiXG4gICAgICAgICMgZXZsIFwiYSA9ICdoZWxsbyBhZ2FpbicgZWFjaCAoaSxjKSAtPiBbaSwoKGklMikgPyBjLnRvVXBwZXJDYXNlKCkgOiBjKV1cIiAgIFwiaEVsTG8gYUdhSW5cIlxuICAgICAgICBcbiAgICBpdCAnZWFjaCBzaW5nbGUnIC0+XG4gICAgICAgIFxuICAgICAgICBldmwgXCJhID0gJycgZWFjaCAtPlwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJ1xuICAgICAgICBldmwgXCJhID0ge30gZWFjaCAtPlwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7fVxuICAgICAgICBldmwgXCJhID0gW10gZWFjaCAtPlwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXVxuICAgICAgICBldmwgXCJhID0gWzEsMl0gZWFjaCAtPiAnYSdcIiAgICAgICAgICAgICAgICAgICAgICAgICBbJ2EnJ2EnXVxuICAgICAgICBldmwgXCJhID0gWzEsMl0gZWFjaCAtPlwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXVxuICAgICAgICBldmwgXCJhID0gWzEsMiwzXSBlYWNoICh2KSAtPiB2XCIgICAgICAgICAgICAgICAgICAgICBbMSwyLDNdXG4gICAgICAgIGV2bCBcImEgPSB7YToxLGI6Mn0gZWFjaCAodikgLT4gdiozXCIgICAgICAgICAgICAgICAgIHthOjMsYjo2fVxuICAgICAgICAgICAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAgICAwMDAwMDAwMFxuICAgICMgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwICAgICAgMDAwXG4gICAgIyAwMDAwMDAwMDAgIDAwMDAwMDAwMCAgMDAwICAwMDAgICAgICAwMDAwMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAgICAwMDBcbiAgICAjIDAwICAgICAwMCAgMDAwICAgMDAwICAwMDAgIDAwMDAwMDAgIDAwMDAwMDAwXG5cbiAgICBpdCAnd2hpbGUnIC0+XG5cbiAgICAgICAgY21wIFwiXCJcIlxuICAgICAgICAgICAgd2hpbGUgdHJ1ZVxuICAgICAgICAgICAgICAgIGxvZyA0XG4gICAgICAgICAgICBcIlwiXCIgXCJcIlwiXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyg0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXCJcIlwiXG5cbiAgICAgICAgY21wIFwiXCJcIlxuICAgICAgICAgICAgd2hpbGUgdHJ1ZSB0aGVuIGxvZyA1XG4gICAgICAgICAgICBcIlwiXCIgXCJcIlwiXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyg1KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXCJcIlwiXG5cbiAgICAgICAgY21wIFwiXCJcIlxuICAgICAgICAgICAgd2hpbGUgYSA9PSBiIHRoZW4gbG9nIGM7IGxvZyBkXG4gICAgICAgICAgICBsb2cgZVxuICAgICAgICAgICAgXCJcIlwiIFwiXCJcIlxuICAgICAgICAgICAgd2hpbGUgKGEgPT09IGIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYylcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICAgICAgICAgIFwiXCJcIlxuIl19
//# sourceURL=../../coffee/test/loops.coffee