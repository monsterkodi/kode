// koffee 1.20.0

/*
00000000   00000000   000  000   000  000000000
000   000  000   000  000  0000  000     000
00000000   0000000    000  000 0 000     000
000        000   000  000  000  0000     000
000        000   000  000  000   000     000
 */
var Print, childp, fs, klor, kstr, noon, slash;

kstr = require('kstr');

klor = require('klor');

noon = require('noon');

slash = require('kslash');

childp = require('child_process');

fs = require('fs-extra');

klor.kolor.globalize();

Print = (function() {
    function Print() {}

    Print.tokens = function(header, tokens) {
        var i, len, results, tok;
        console.log(R3(y5("\n " + header)));
        console.log(b6(kstr.pad('', 80, ' ')));
        results = [];
        for (i = 0, len = tokens.length; i < len; i++) {
            tok = tokens[i];
            results.push(this.token(tok));
        }
        return results;
    };

    Print.token = function(tok) {
        var indent, ref, toktext;
        indent = kstr.lpad('', tok.col);
        if (tok.type === 'nl') {
            console.log(red('◂'));
        }
        if ((ref = tok.type) === 'ws' || ref === 'nl') {
            return;
        }
        toktext = function(tok) {
            if (tok.text === '') {
                return '\n' + indent;
            } else if (tok.text) {
                return tok.text;
            } else if (tok.tokens) {
                return '\n' + (indent = tok.indent) + (tok.tokens.map(function(t) {
                    return toktext(t);
                })).join(' ');
            } else {
                return '???';
            }
        };
        return console.log(b6(kstr.lpad(tok.line, 4)), blue(kstr.lpad(tok.col, 3)), gray(kstr.pad(tok.type, 10)), bold(yellow(indent + toktext(tok))));
    };

    Print.stack = function(stack, node, color) {
        if (color == null) {
            color = W4;
        }
        return console.log(W2(stack.join(' ') + ' ') + color(node != null ? node : ''));
    };

    Print.block = function(header, block, legend) {
        var printBlock;
        if (legend == null) {
            legend = false;
        }
        console.log(R3(y5("\n " + header)));
        printBlock = function(b) {
            var c, ci, cn, i, len, ref, ref1, ref2, ref3, s;
            if (legend) {
                s = b.indent + b6(kstr.rpad(b.line, 3)) + b5('- ' + kstr.pad(b.last, 3)) + w2(kstr.rpad(b.col, 3)) + yellow(b.tokens.length);
                s += '\n' + b.indent;
            }
            s = b.indent;
            if ((ref = b.type) === '{}' || ref === '()' || ref === '[]') {
                s += b.type[0] + ' ';
            }
            ref1 = b.tokens;
            for (i = 0, len = ref1.length; i < len; i++) {
                c = ref1[i];
                if (c.tokens != null) {
                    s += '\n' + printBlock(c) + b.indent;
                } else if (c.type === 'nl') {
                    s += '\n' + b.indent + '▸';
                } else {
                    ci = parseInt(b.indent.length / 4);
                    cn = ['g5', 'r5', 'm5', 'g3', 'r3', 'm3', 'g1', 'r1', 'm1'][ci % 8];
                    s += global[cn](((ref2 = c.text) != null ? ref2 : '') + ' ');
                }
            }
            if ((ref3 = b.type) === '{}' || ref3 === '()' || ref3 === '[]') {
                s += b.type[1];
            }
            return s;
        };
        return console.log(printBlock(block));
    };

    Print.ast = function(header, ast) {
        var i, len, node, printNode, results;
        console.log(R3(y5("\n " + header)));
        printNode = function(node, indent) {
            var i, len, name, s, value;
            if (indent == null) {
                indent = '';
            }
            s = '';
            if (!node) {
                return s;
            }
            if (node.type) {
                s += b6(kstr.lpad(node.line, 4)) + ' ' + blue(kstr.lpad(node.col, 3)) + ' ' + gray(kstr.pad(node.type, 10)) + ' ' + bold(yellow(indent + node.text) + '\n');
            } else if (node instanceof Array) {
                s += (kstr.lpad('', 19)) + ' ' + bold(w3(indent + '{'));
                for (i = 0, len = node.length; i < len; i++) {
                    value = node[i];
                    s += '\n' + printNode(value, indent);
                }
                s += (kstr.lpad('', 19)) + ' ' + bold(w3(indent + '}\n'));
            } else {
                for (name in node) {
                    value = node[name];
                    s += (kstr.lpad('', 19)) + ' ' + bold(b8(indent + name));
                    s += '\n' + printNode(value, indent + '  ');
                }
            }
            return s;
        };
        if (ast instanceof Array) {
            results = [];
            for (i = 0, len = ast.length; i < len; i++) {
                node = ast[i];
                results.push(console.log(printNode(node)));
            }
            return results;
        } else {
            return console.log(printNode(ast));
        }
    };

    Print.code = function(msg, code, ext) {
        var tmp;
        if (ext == null) {
            ext = 'js';
        }
        console.log(W1(w5(kstr.lpad(msg + ' ', 80))));
        tmp = slash.tmpfile();
        tmp = slash.swapExt(tmp, ext);
        slash.writeText(tmp, code);
        console.log(childp.execSync(__dirname + "/../node_modules/.bin/colorcat --lineNumbers " + tmp, {
            encoding: 'utf8'
        }));
        return fs.unlink(tmp);
    };

    Print.noon = function(msg, arg) {
        console.log(red(msg));
        return console.log(noon.stringify(arg, {
            colors: true
        }));
    };

    return Print;

})();

module.exports = Print;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpbnQuanMiLCJzb3VyY2VSb290IjoiLi4vY29mZmVlIiwic291cmNlcyI6WyJwcmludC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7OztBQUFBLElBQUE7O0FBUUEsSUFBQSxHQUFTLE9BQUEsQ0FBUSxNQUFSOztBQUNULElBQUEsR0FBUyxPQUFBLENBQVEsTUFBUjs7QUFDVCxJQUFBLEdBQVMsT0FBQSxDQUFRLE1BQVI7O0FBQ1QsS0FBQSxHQUFTLE9BQUEsQ0FBUSxRQUFSOztBQUNULE1BQUEsR0FBUyxPQUFBLENBQVEsZUFBUjs7QUFDVCxFQUFBLEdBQVMsT0FBQSxDQUFRLFVBQVI7O0FBRVQsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFYLENBQUE7O0FBRU07OztJQVFGLEtBQUMsQ0FBQSxNQUFELEdBQVMsU0FBQyxNQUFELEVBQVMsTUFBVDtBQUNGLFlBQUE7UUFBQSxPQUFBLENBQUMsR0FBRCxDQUFLLEVBQUEsQ0FBRyxFQUFBLENBQUcsS0FBQSxHQUFNLE1BQVQsQ0FBSCxDQUFMO1FBQXlCLE9BQUEsQ0FDeEIsR0FEd0IsQ0FDcEIsRUFBQSxDQUFHLElBQUksQ0FBQyxHQUFMLENBQVMsRUFBVCxFQUFZLEVBQVosRUFBZSxHQUFmLENBQUgsQ0FEb0I7QUFFeEI7YUFBQSx3Q0FBQTs7eUJBQ0ksSUFBQyxDQUFBLEtBQUQsQ0FBTyxHQUFQO0FBREo7O0lBSEM7O0lBTVQsS0FBQyxDQUFBLEtBQUQsR0FBUSxTQUFDLEdBQUQ7QUFFSixZQUFBO1FBQUEsTUFBQSxHQUFTLElBQUksQ0FBQyxJQUFMLENBQVUsRUFBVixFQUFhLEdBQUcsQ0FBQyxHQUFqQjtRQUFvQixJQUNkLEdBQUcsQ0FBQyxJQUFKLEtBQVksSUFERTtZQUFBLE9BQUEsQ0FDN0IsR0FENkIsQ0FDekIsR0FBQSxDQUFJLEdBQUosQ0FEeUIsRUFBQTs7UUFFN0IsV0FBVSxHQUFHLENBQUMsS0FBSixLQUFhLElBQWIsSUFBQSxHQUFBLEtBQWlCLElBQTNCO0FBQUEs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QkFHRyxPQUFBLENBQUMsR0FBRCxDQUFLLFNBQUEsQ0FBVSxHQUFWLENBQUwsRUFISDs7SUF2QkU7O0lBa0NOLEtBQUMsQ0FBQSxJQUFELEdBQU8sU0FBQyxHQUFELEVBQU0sSUFBTixFQUFZLEdBQVo7QUFDSixZQUFBOztZQURnQixNQUFJOztRQUNwQixPQUFBLENBQUMsR0FBRCxDQUFLLEVBQUEsQ0FBRyxFQUFBLENBQUcsSUFBSSxDQUFDLElBQUwsQ0FBVSxHQUFBLEdBQUksR0FBZCxFQUFrQixFQUFsQixDQUFILENBQUgsQ0FBTDtRQUNDLEdBQUEsR0FBTSxLQUFLLENBQUMsT0FBTixDQUFBO1FBQ04sR0FBQSxHQUFNLEtBQUssQ0FBQyxPQUFOLENBQWMsR0FBZCxFQUFtQixHQUFuQjtRQUNOLEtBQUssQ0FBQyxTQUFOLENBQWdCLEdBQWhCLEVBQXFCLElBQXJCO1FBQXlCLE9BQUEsQ0FDekIsR0FEeUIsQ0FDckIsTUFBTSxDQUFDLFFBQVAsQ0FBbUIsU0FBRCxHQUFXLCtDQUFYLEdBQTBELEdBQTVFLEVBQWtGO1lBQUEsUUFBQSxFQUFTLE1BQVQ7U0FBbEYsQ0FEcUI7ZUFFekIsRUFBRSxDQUFDLE1BQUgsQ0FBVSxHQUFWO0lBTkc7O0lBUVAsS0FBQyxDQUFBLElBQUQsR0FBTyxTQUFDLEdBQUQsRUFBTSxHQUFOO1FBQ0osT0FBQSxDQUFDLEdBQUQsQ0FBSyxHQUFBLENBQUksR0FBSixDQUFMO2VBQVksT0FBQSxDQUNYLEdBRFcsQ0FDUCxJQUFJLENBQUMsU0FBTCxDQUFlLEdBQWYsRUFBb0I7WUFBQSxNQUFBLEVBQU8sSUFBUDtTQUFwQixDQURPO0lBRFI7Ozs7OztBQUlYLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4wMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwMFxuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwMCAgMDAwICAgICAwMDBcbjAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAgIDAwMCAwIDAwMCAgICAgMDAwXG4wMDAgICAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAgIDAwMDAgICAgIDAwMFxuMDAwICAgICAgICAwMDAgICAwMDAgIDAwMCAgMDAwICAgMDAwICAgICAwMDBcbiMjI1xuXG5rc3RyICAgPSByZXF1aXJlICdrc3RyJ1xua2xvciAgID0gcmVxdWlyZSAna2xvcidcbm5vb24gICA9IHJlcXVpcmUgJ25vb24nXG5zbGFzaCAgPSByZXF1aXJlICdrc2xhc2gnXG5jaGlsZHAgPSByZXF1aXJlICdjaGlsZF9wcm9jZXNzJ1xuZnMgICAgID0gcmVxdWlyZSAnZnMtZXh0cmEnXG5cbmtsb3Iua29sb3IuZ2xvYmFsaXplKClcblxuY2xhc3MgUHJpbnRcblxuICAgICMgMDAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDBcbiAgICAjICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMCAgICAgICAwMDAwICAwMDAgIDAwMFxuICAgICMgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMCAwIDAwMCAgMDAwMDAwMFxuICAgICMgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgMDAwICAgMDAwICAgICAgIDAwMCAgMDAwMCAgICAgICAwMDBcbiAgICAjICAgIDAwMCAgICAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDBcblxuICAgIEB0b2tlbnM6IChoZWFkZXIsIHRva2VucykgLT5cbiAgICAgICAgICAgIGxvZyBSMyB5NSBcIlxcbiAje2hlYWRlcn1cIlxuICAgICAgICAgICAgbG9nIGI2KGtzdHIucGFkICcnIDgwICcgJylcbiAgICAgICAgICAgIGZvciB0b2sgaW4gdG9rZW5zXG4gICAgICAgICAgICAgICAgQHRva2VuIHRva1xuXG4gICAgQHRva2VuOiAodG9rKSAtPlxuICAgICAgICBcbiAgICAgICAgaW5kZW50ID0ga3N0ci5scGFkICcnIHRvay5jb2xcbiAgICAgICAgbG9nIHJlZCAn4peCJyBpZiB0b2sudHlwZSA9PSAnbmwnXG4gICAgICAgIHJldHVybiBpZiB0b2sudHlwZSBpbiBbJ3dzJydubCddXG4gICAgICAgIHRva3RleHQgPSAodG9rKSAtPiBcbiAgICAgICAgICAgIGlmIHRvay50ZXh0ID09ICcnIHRoZW4gJ1xcbicraW5kZW50IFxuICAgICAgICAgICAgZWxzZSBpZiB0b2sudGV4dCB0aGVuIHRvay50ZXh0IFxuICAgICAgICAgICAgZWxzZSBpZiB0b2sudG9rZW5zXG4gICAgICAgICAgICAgICAgJ1xcbicrKGluZGVudD10b2suaW5kZW50KSsodG9rLnRva2Vucy5tYXAgKHQpIC0+IHRva3RleHQodCkpLmpvaW4gJyAnXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgJz8/PydcbiAgICAgICAgbG9nIGI2KGtzdHIubHBhZCB0b2subGluZSwgNCksIGJsdWUoa3N0ci5scGFkIHRvay5jb2wsIDMpLCBncmF5KGtzdHIucGFkIHRvay50eXBlLCAxMCksIGJvbGQgeWVsbG93KGluZGVudCArIHRva3RleHQgdG9rKVxuICAgICAgICAgICAgXG4gICAgIyAgMDAwMDAwMCAgMDAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAgICAwMDBcbiAgICAjIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgMDAwXG4gICAgIyAwMDAwMDAwICAgICAgMDAwICAgICAwMDAwMDAwMDAgIDAwMCAgICAgICAwMDAwMDAwXG4gICAgIyAgICAgIDAwMCAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgIDAwMFxuICAgICMgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwICAgMDAwICAgMDAwMDAwMCAgMDAwICAgMDAwXG5cbiAgICBAc3RhY2s6IChzdGFjaywgbm9kZSwgY29sb3I9VzQpIC0+XG5cbiAgICAgICAgbG9nIFcyKHN0YWNrLmpvaW4oJyAnKSArICcgJykgKyBjb2xvciBub2RlID8gJydcblxuICAgICMgMDAwMDAwMCAgICAwMDAgICAgICAgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAgICAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAwMDBcbiAgICAjIDAwMDAwMDAgICAgMDAwICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwMDAwMFxuICAgICMgMDAwICAgMDAwICAwMDAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgIDAwMFxuICAgICMgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAgICAwMDBcblxuICAgIEBibG9jazogKGhlYWRlciwgYmxvY2ssIGxlZ2VuZD1mYWxzZSkgLT5cblxuICAgICAgICBsb2cgUjMgeTUgXCJcXG4gI3toZWFkZXJ9XCJcbiAgICAgICAgcHJpbnRCbG9jayA9IChiKSAtPlxuICAgICAgICAgICAgaWYgbGVnZW5kXG4gICAgICAgICAgICAgICAgcyA9IGIuaW5kZW50ICsgYjYoa3N0ci5ycGFkIGIubGluZSwgMykgKyBiNSgnLSAnICsga3N0ci5wYWQgYi5sYXN0LCAzKSArIHcyKGtzdHIucnBhZCBiLmNvbCwgMykgKyB5ZWxsb3coYi50b2tlbnMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHMgKz0gJ1xcbicgKyBiLmluZGVudFxuICAgICAgICAgICAgcyA9IGIuaW5kZW50XG4gICAgICAgICAgICBpZiBiLnR5cGUgaW4gWyd7fScnKCknJ1tdJ10gdGhlbiBzICs9IGIudHlwZVswXSArICcgJ1xuICAgICAgICAgICAgZm9yIGMgaW4gYi50b2tlbnNcbiAgICAgICAgICAgICAgICBpZiBjLnRva2Vucz9cbiAgICAgICAgICAgICAgICAgICAgcyArPSAnXFxuJyArIHByaW50QmxvY2soYykgKyBiLmluZGVudFxuICAgICAgICAgICAgICAgIGVsc2UgaWYgYy50eXBlID09ICdubCdcbiAgICAgICAgICAgICAgICAgICAgcyArPSAnXFxuJytiLmluZGVudCsn4pa4J1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgY2kgPSBwYXJzZUludCBiLmluZGVudC5sZW5ndGgvNFxuICAgICAgICAgICAgICAgICAgICBjbiA9IFsnZzUnJ3I1JydtNScnZzMnJ3IzJydtMycnZzEnJ3IxJydtMSddW2NpJThdXG4gICAgICAgICAgICAgICAgICAgIHMgKz0gZ2xvYmFsW2NuXSAoYy50ZXh0ID8gJycpICsgJyAnXG4gICAgICAgICAgICBpZiBiLnR5cGUgaW4gWyd7fScnKCknJ1tdJ10gdGhlbiBzICs9IGIudHlwZVsxXVxuICAgICAgICAgICAgc1xuICAgICAgICBsb2cgcHJpbnRCbG9jayBibG9ja1xuXG4gICAgIyAgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAwMDAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgICAgIDAwMFxuICAgICMgMDAwMDAwMDAwICAwMDAwMDAwICAgICAgMDAwXG4gICAgIyAwMDAgICAwMDAgICAgICAgMDAwICAgICAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgIDAwMFxuXG4gICAgQGFzdDogKGhlYWRlciwgYXN0KSAtPlxuXG4gICAgICAgIGxvZyBSMyB5NSBcIlxcbiAje2hlYWRlcn1cIlxuXG4gICAgICAgIHByaW50Tm9kZSA9IChub2RlLCBpbmRlbnQ9JycpIC0+XG5cbiAgICAgICAgICAgIHMgPSAnJ1xuXG4gICAgICAgICAgICByZXR1cm4gcyBpZiBub3Qgbm9kZVxuXG4gICAgICAgICAgICBpZiBub2RlLnR5cGVcbiAgICAgICAgICAgICAgICBzICs9IGI2KGtzdHIubHBhZCBub2RlLmxpbmUsIDQpICsgJyAnICsgYmx1ZShrc3RyLmxwYWQgbm9kZS5jb2wsIDMpICsgJyAnICsgZ3JheShrc3RyLnBhZCBub2RlLnR5cGUsIDEwKSArICcgJyArIGJvbGQgeWVsbG93KGluZGVudCArIG5vZGUudGV4dCkgKyAnXFxuJ1xuICAgICAgICAgICAgZWxzZSBpZiBub2RlIGluc3RhbmNlb2YgQXJyYXlcbiAgICAgICAgICAgICAgICBzICs9IChrc3RyLmxwYWQgJycsIDE5KSArICcgJyArIGJvbGQgdzMoaW5kZW50ICsgJ3snKVxuICAgICAgICAgICAgICAgIGZvciB2YWx1ZSBpbiBub2RlXG4gICAgICAgICAgICAgICAgICAgIHMgKz0gJ1xcbicgKyBwcmludE5vZGUgdmFsdWUsIGluZGVudFxuICAgICAgICAgICAgICAgIHMgKz0gKGtzdHIubHBhZCAnJywgMTkpICsgJyAnICsgYm9sZCB3MyhpbmRlbnQgKyAnfVxcbicpXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgZm9yIG5hbWUsdmFsdWUgb2Ygbm9kZVxuICAgICAgICAgICAgICAgICAgICBzICs9IChrc3RyLmxwYWQgJycsIDE5KSArICcgJyArIGJvbGQgYjgoaW5kZW50ICsgbmFtZSlcbiAgICAgICAgICAgICAgICAgICAgcyArPSAnXFxuJyArIHByaW50Tm9kZSB2YWx1ZSwgaW5kZW50KycgICdcbiAgICAgICAgICAgIHNcblxuICAgICAgICBpZiBhc3QgaW5zdGFuY2VvZiBBcnJheVxuICAgICAgICAgICAgbG9nIHByaW50Tm9kZSBub2RlIGZvciBub2RlIGluIGFzdFxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBsb2cgcHJpbnROb2RlIGFzdFxuXG4gICAgIyAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAwXG4gICAgIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwXG4gICAgIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMFxuICAgICMgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwMFxuXG4gICAgQGNvZGU6IChtc2csIGNvZGUsIGV4dD0nanMnKSAtPlxuICAgICAgICBsb2cgVzEgdzUga3N0ci5scGFkIG1zZysnICcgODBcbiAgICAgICAgdG1wID0gc2xhc2gudG1wZmlsZSgpXG4gICAgICAgIHRtcCA9IHNsYXNoLnN3YXBFeHQgdG1wLCBleHRcbiAgICAgICAgc2xhc2gud3JpdGVUZXh0IHRtcCwgY29kZVxuICAgICAgICBsb2cgY2hpbGRwLmV4ZWNTeW5jIFwiI3tfX2Rpcm5hbWV9Ly4uL25vZGVfbW9kdWxlcy8uYmluL2NvbG9yY2F0IC0tbGluZU51bWJlcnMgI3t0bXB9XCIgZW5jb2Rpbmc6J3V0ZjgnXG4gICAgICAgIGZzLnVubGluayB0bXBcblxuICAgIEBub29uOiAobXNnLCBhcmcpIC0+XG4gICAgICAgIGxvZyByZWQgbXNnXG4gICAgICAgIGxvZyBub29uLnN0cmluZ2lmeSBhcmcsIGNvbG9yczp0cnVlXG5cbm1vZHVsZS5leHBvcnRzID0gUHJpbnRcbiJdfQ==
//# sourceURL=../coffee/print.coffee